// ==UserScript==
// @name         Imdb Obsidian Base Watchlist
// @namespace    https://github.com/siddacool/automation-scripts/tree/main/scripts/imdb-obsidian-base-watchlist
// @version      2.3.4
// @author       siddacool
// @description  Copy IMDB data to Markdown for Obsidian base
// @icon         https://www.google.com/s2/favicons?sz=64&domain=https://www.imdb.com/
// @source       https://github.com/siddacool/automation-scripts/tree/main/scripts/imdb-obsidian-base-watchlist
// @downloadURL  https://raw.githubusercontent.com/siddacool/automation-scripts/gh-pages/packages/imdb-obsidian-base-watchlist/imdb-obsidian-base-watchlist.user.js
// @updateURL    https://raw.githubusercontent.com/siddacool/automation-scripts/gh-pages/packages/imdb-obsidian-base-watchlist/imdb-obsidian-base-watchlist.meta.js
// @match        https://www.imdb.com/title/*
// @grant        none
// ==/UserScript==

(function () {
	'use strict';

	const d$1=new Set;const t$1 = async e=>{d$1.has(e)||(d$1.add(e),(t=>{typeof GM_addStyle=="function"?GM_addStyle(t):(document.head||document.documentElement).appendChild(document.createElement("style")).append(t);})(e));};

	t$1(' @charset "UTF-8";.ActionTooltip.svelte-8g2rx8{position:absolute;top:40px;left:-7px;font-size:.8rem;width:55px;height:30px;background-color:#000;border-radius:4px;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .2s ease}.ActionTooltip.show.svelte-8g2rx8{opacity:1;pointer-events:auto}button.svelte-1z0r1g6{width:40px;height:40px;display:flex;background:transparent;border:0;align-items:center;justify-content:center;cursor:pointer;border-radius:50%;transition:all .1s;color:#fff;font-size:1.2rem;padding:0}button.svelte-1z0r1g6:focus-visible{outline:2px solid #f5c518;outline-offset:2px;background:#00000040}button.svelte-1z0r1g6:hover{color:#f5c518;background:#00000040}svg.svelte-1nzdrgw{position:relative;left:1px}.GrabIMBDDetails.svelte-1oywuru{position:relative;display:inline-flex;top:-3px} ');

	"undefined"!=typeof window&&((window.__svelte??={}).v??=new Set).add("5");const e=Symbol();var t=Array.isArray,n=Array.prototype.indexOf,r=Array.from,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyDescriptors,l=Object.prototype,f=Array.prototype,a=Object.getPrototypeOf,c=Object.isExtensible;const u=()=>{};function d(){var e,t;return {promise:new Promise((n,r)=>{e=n,t=r;}),resolve:e,reject:t}}const h=16,v=512,p=1024,g=2048,_=4096,m=8192,y=16384,b=32768,w=65536,S=1<<18,k=1<<19,x=32768,$=1<<21,M=1<<23,E=Symbol("$state"),A=Symbol(""),j=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function N(e){return e===this.v}function O(e){return n=this.v,!((t=e)!=t?n==n:t!==n||null!==t&&"object"==typeof t||"function"==typeof t);var t,n;}let P=false,q=null;function D(e){q=e;}function T(e,t=false,n){q={p:q,i:false,c:null,e:null,s:e,x:null,l:P&&!t?{s:null,u:null,$:[]}:null};}function C(e){var t=q,n=t.e;if(null!==n)for(var r of(t.e=null,n))Ne(r);return t.i=true,q=t.p,{}}function L(){return !P||null!==q&&null===q.l}let z=[];function R(e){if(0===z.length){var t=z;queueMicrotask(()=>{t===z&&function(){var e=z;z=[],function(e){for(var t=0;t<e.length;t++)e[t]();}(e);}();});}z.push(e);}function I(e){var t=Je;if(null===t)return Ke.f|=M,e;if(0===(t.f&b)){if(!(128&t.f))throw e;t.b.error(e);}else U(e,t);}function U(e,t){for(;null!==t;){if(128&t.f)try{return void t.b.error(e)}catch(n){e=n;}t=t.parent;}throw e}const B=new Set;let H=null,W=null,F=[],V=null,K=false;class Y{committed=false;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#i=null;#o=new Set;#s=new Set;skipped_effects=new Set;is_fork=false;is_deferred(){return this.is_fork||this.#r>0}process(e){F=[],this.apply();var t={parent:null,effect:null,effects:[],render_effects:[]};for(const n of e)this.#l(n,t);this.is_fork||this.#f(),this.is_deferred()?(this.#a(t.effects),this.#a(t.render_effects)):(H=null,X(t.render_effects),X(t.effects),this.#i?.resolve()),W=null;}#l(e,t){e.f^=p;for(var n=e.first;null!==n;){var r=n.f,i=!!(96&r),o=i&&0!==(r&p)||0!==(r&m)||this.skipped_effects.has(n);if(!!(128&n.f)&&n.b?.is_pending()&&(t={parent:t,effect:n,effects:[],render_effects:[]}),!o&&null!==n.fn){i?n.f^=p:4&r?t.effects.push(n):lt(n)&&(0!==(n.f&h)&&this.#o.add(n),dt(n));var s=n.first;if(null!==s){n=s;continue}}var l=n.parent;for(n=n.next;null===n&&null!==l;)l===t.effect&&(this.#a(t.effects),this.#a(t.render_effects),t=t.parent),n=l.next,l=l.parent;}}#a(e){for(const t of e)0!==(t.f&g)?this.#o.add(t):0!==(t.f&_)&&this.#s.add(t),this.#c(t.deps),_t(t,p);}#c(e){if(null!==e)for(const t of e)2&t.f&&0!==(t.f&x)&&(t.f^=x,this.#c(t.deps));}capture(e,t){this.previous.has(e)||this.previous.set(e,t),0===(e.f&M)&&(this.current.set(e,e.v),W?.set(e,e.v));}activate(){H=this,this.apply();}deactivate(){H===this&&(H=null,W=null);}flush(){if(this.activate(),F.length>0){if(function(){var e=He;K=true;try{var t=0;for(We(!0);F.length>0;){var n=Y.ensure();t++>1e3&&G(),n.process(F),ce.clear();}}finally{K=false,We(e),V=null;}}(),null!==H&&H!==this)return}else 0===this.#n&&this.process([]);this.deactivate();}discard(){for(const e of this.#t)e(this);this.#t.clear();}#f(){if(0===this.#r){for(const e of this.#e)e();this.#e.clear();}0===this.#n&&this.#u();}#u(){if(B.size>1){this.previous.clear();var e=W,t=true,n={parent:null,effect:null,effects:[],render_effects:[]};for(const e of B){if(e===this){t=false;continue}const i=[];for(const[n,r]of this.current){if(e.current.has(n)){if(!t||r===e.current.get(n))continue;e.current.set(n,r);}i.push(n);}if(0===i.length)continue;const o=[...e.current.keys()].filter(e=>!this.current.has(e));if(o.length>0){var r=F;F=[];const t=new Set,s=new Map;for(const e of i)Q(e,o,t,s);if(F.length>0){H=e,e.apply();for(const t of F)e.#l(t,n);e.deactivate();}F=r;}}H=null,W=e;}this.committed=true,B.delete(this);}increment(e){this.#n+=1,e&&(this.#r+=1);}decrement(e){this.#n-=1,e&&(this.#r-=1),this.revive();}revive(){for(const e of this.#o)this.#s.delete(e),_t(e,g),ee(e);for(const e of this.#s)_t(e,_),ee(e);this.flush();}oncommit(e){this.#e.add(e);}ondiscard(e){this.#t.add(e);}settled(){return (this.#i??=d()).promise}static ensure(){if(null===H){const e=H=new Y;B.add(H),Y.enqueue(()=>{H===e&&e.flush();});}return H}static enqueue(e){R(e);}apply(){}}function G(){try{!function(){throw Error("https://svelte.dev/e/effect_update_depth_exceeded")}();}catch(e){U(e,V);}}let J=null;function X(e){var t=e.length;if(0!==t){for(var n=0;n<t;){var r=e[n++];if(!(24576&r.f)&&lt(r)&&(J=new Set,dt(r),null===r.deps&&null===r.first&&null===r.nodes&&(null===r.teardown&&null===r.ac?Le(r):r.fn=null),J?.size>0)){ce.clear();for(const e of J){if(24576&e.f)continue;const t=[e];let n=e.parent;for(;null!==n;)J.has(n)&&(J.delete(n),t.push(n)),n=n.parent;for(let e=t.length-1;e>=0;e--){const n=t[e];24576&n.f||dt(n);}}J.clear();}}J=null;}}function Q(e,t,n,r){if(!n.has(e)&&(n.add(e),null!==e.reactions))for(const i of e.reactions){const e=i.f;2&e?Q(i,t,n,r):4194320&e&&0===(e&g)&&Z(i,t,r)&&(_t(i,g),ee(i));}}function Z(e,t,n){const r=n.get(e);if(void 0!==r)return r;if(null!==e.deps)for(const i of e.deps){if(t.includes(i))return  true;if(2&i.f&&Z(i,t,n))return n.set(i,true),true}return n.set(e,false),false}function ee(e){for(var t=V=e;null!==t.parent;){var n=(t=t.parent).f;if(K&&t===Je&&0!==(n&h)&&0===(n&S))return;if(96&n){if(0===(n&p))return;t.f^=p;}}F.push(t);}class te{parent;#n=false;#d;#h=null;#v;#p;#g;#_=null;#m=null;#y=null;#b=null;#w=null;#S=0;#k=0;#x=false;#$=null;#M=function(e){let t,n=0,r=de(0);return ()=>{je()&&(ht(r),function(e,t=0){Ae(8|t,e,true);}(()=>(0===n&&(t=function(){var t=Ye;try{return Ye=!0,e(()=>ge(r))}finally{Ye=t;}}()),n+=1,()=>{R(()=>{n-=1,0===n&&(t?.(),t=void 0,ge(r));});})));}}(()=>(this.#$=de(this.#S),()=>{this.#$=null;}));constructor(e,t,n){this.#d=e,this.#v=t,this.#p=n,this.parent=Je.b,this.#n=!!this.#v.pending,this.#g=Pe(()=>{Je.b=this;var e=this.#E();try{this.#_=qe(()=>n(e));}catch(t){this.error(t);}return this.#k>0?this.#A():this.#n=false,()=>{this.#w?.remove();}},589952);}#j(){try{this.#_=qe(()=>this.#p(this.#d));}catch(e){this.error(e);}this.#n=false;}#N(){const e=this.#v.pending;e&&(this.#m=qe(()=>e(this.#d)),Y.enqueue(()=>{var e=this.#E();this.#_=this.#O(()=>(Y.ensure(),qe(()=>this.#p(e)))),this.#k>0?this.#A():(ze(this.#m,()=>{this.#m=null;}),this.#n=false);}));}#E(){var e=this.#d;return this.#n&&(this.#w=ke(),this.#d.before(this.#w),e=this.#w),e}is_pending(){return this.#n||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return !!this.#v.pending}#O(e){var t=Je,n=Ke,r=q;Xe(this.#g),Ge(this.#g),D(this.#g.ctx);try{return e()}catch(i){return I(i),null}finally{Xe(t),Ge(n),D(r);}}#A(){const e=this.#v.pending;null!==this.#_&&(this.#b=document.createDocumentFragment(),this.#b.append(this.#w),Be(this.#_,this.#b)),null===this.#m&&(this.#m=qe(()=>e(this.#d)));}#P(e){this.has_pending_snippet()?(this.#k+=e,0===this.#k&&(this.#n=false,this.#m&&ze(this.#m,()=>{this.#m=null;}),this.#b&&(this.#d.before(this.#b),this.#b=null))):this.parent&&this.parent.#P(e);}update_pending_count(e){this.#P(e),this.#S+=e,this.#$&&pe(this.#$,this.#S);}get_effect_pending(){return this.#M(),ht(this.#$)}error(e){var t=this.#v.onerror;let n=this.#v.failed;if(this.#x||!t&&!n)throw e;this.#_&&(Ce(this.#_),this.#_=null),this.#m&&(Ce(this.#m),this.#m=null),this.#y&&(Ce(this.#y),this.#y=null);var r=false,i=false;const o=()=>{r?console.warn("https://svelte.dev/e/svelte_boundary_reset_noop"):(r=true,i&&function(){throw Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}(),Y.ensure(),this.#S=0,null!==this.#y&&ze(this.#y,()=>{this.#y=null;}),this.#n=this.has_pending_snippet(),this.#_=this.#O(()=>(this.#x=false,qe(()=>this.#p(this.#d)))),this.#k>0?this.#A():this.#n=false);};var s=Ke;try{Ge(null),i=!0,t?.(e,o),i=!1;}catch(l){U(l,this.#g&&this.#g.parent);}finally{Ge(s);}n&&R(()=>{this.#y=this.#O(()=>{Y.ensure(),this.#x=true;try{return qe(()=>{n(this.#d,()=>e,()=>o);})}catch(l){return U(l,this.#g.parent),null}finally{this.#x=false;}});});}}function ne(){Xe(null),Ge(null),D(null);}function re(t){var n=null!==Ke&&2&Ke.f?Ke:null;return null!==Je&&(Je.f|=k),{ctx:q,deps:null,effects:null,equals:N,f:2050,fn:t,reactions:null,rv:0,v:e,wv:0,parent:n??Je,ac:null}}function ie(t,n){let r=Je;null===r&&function(){throw Error("https://svelte.dev/e/async_derived_orphan")}();var i=r.b,o=void 0,s=de(e),l=!Ke,f=new Map;return function(e){Ae(4718592,e,true);}(()=>{var e=d();o=e.promise;try{Promise.resolve(t()).then(e.resolve,e.reject).then(()=>{n===H&&n.committed&&n.deactivate(),ne();});}catch(c){e.reject(c),ne();}var n=H;if(l){var r=!i.is_pending();i.update_pending_count(1),n.increment(r),f.get(n)?.reject(j),f.delete(n),f.set(n,e);}const a=(e,t=void 0)=>{if(n.activate(),t)t!==j&&(s.f|=M,pe(s,t));else {0!==(s.f&M)&&(s.f^=M),pe(s,e);for(const[e,t]of f){if(f.delete(e),e===n)break;t.reject(j);}}l&&(i.update_pending_count(-1),n.decrement(r));};e.promise.then(a,e=>a(null,e||"unknown"));}),function(){const e=Ae(8,null,false);_t(e,p),e.teardown=()=>{for(const e of f.values())e.reject(j);};}(),new Promise(e=>{!function t(n){function r(){n===o?e(s):t(o);}n.then(r,r);}(o);})}function oe(e){const t=re(e);return t.equals=O,t}function se(e){var t=e.effects;if(null!==t){e.effects=null;for(var n=0;n<t.length;n+=1)Ce(t[n]);}}function le(e){var t,n=Je;Xe(function(e){for(var t=e.parent;null!==t;){if(!(2&t.f))return 0===(t.f&y)?t:null;t=t.parent;}return null}(e));try{e.f&=-32769,se(e),t=at(e);}finally{Xe(n);}return t}function fe(e){var t=le(e);e.equals(t)||(H?.is_fork||(e.v=t),e.wv=st()),Fe||(null!==W?(je()||H?.is_fork)&&W.set(e,t):_t(e,0===(e.f&v)?_:p));}let ae=new Set;const ce=new Map;let ue=false;function de(e,t){return {f:0,v:e,reactions:null,equals:N,rv:0,wv:0}}function he(e,t){const n=de(e);var r;return r=n,null!==Ke&&(null===Qe?Qe=[r]:Qe.push(r)),n}function ve(e,t,n=false){return null!==Ke&&(!Ye||!!(131072&Ke.f))&&L()&&4325394&Ke.f&&!Qe?.includes(e)&&function(){throw Error("https://svelte.dev/e/state_unsafe_mutation")}(),pe(e,n?me(t):t)}function pe(e,t){if(!e.equals(t)){var n=e.v;ce.set(e,Fe?t:n),e.v=t;var r=Y.ensure();r.capture(e,n),2&e.f&&(0!==(e.f&g)&&le(e),_t(e,0!==(e.f&v)?p:_)),e.wv=st(),_e(e,g),!L()||null===Je||0===(Je.f&p)||96&Je.f||(null===tt?function(e){tt=e;}([e]):tt.push(e)),!r.is_fork&&ae.size>0&&!ue&&function(){ue=false;var e=He;We(true);const t=Array.from(ae);try{for(const e of t)0!==(e.f&p)&&_t(e,_),lt(e)&&dt(e);}finally{We(e);}ae.clear();}();}return t}function ge(e){ve(e,e.v+1);}function _e(e,t){var n=e.reactions;if(null!==n)for(var r=L(),i=n.length,o=0;o<i;o++){var s=n[o],l=s.f;if(r||s!==Je){var f=0===(l&g);if(f&&_t(s,t),2&l){var a=s;W?.delete(a),0===(l&x)&&(l&v&&(s.f|=x),_e(a,_));}else f&&(0!==(l&h)&&null!==J&&J.add(s),ee(s));}}}function me(n){if("object"!=typeof n||null===n||E in n)return n;const r=a(n);if(r!==l&&r!==f)return n;var i=new Map,s=t(n),c=he(0),u=it,d=e=>{if(it===u)return e();var t=Ke,n=it;Ge(null),ot(u);var r=e();return Ge(t),ot(n),r};return s&&i.set("length",he(n.length)),new Proxy(n,{defineProperty(e,t,n){"value"in n&&false!==n.configurable&&false!==n.enumerable&&false!==n.writable||function(){throw Error("https://svelte.dev/e/state_descriptors_fixed")}();var r=i.get(t);return void 0===r?r=d(()=>{var e=he(n.value);return i.set(t,e),e}):ve(r,n.value,true),true},deleteProperty(t,n){var r=i.get(n);if(void 0===r){if(n in t){const t=d(()=>he(e));i.set(n,t),ge(c);}}else ve(r,e),ge(c);return  true},get(t,r,s){if(r===E)return n;var l=i.get(r),f=r in t;if(void 0!==l||f&&!o(t,r)?.writable||(l=d(()=>he(me(f?t[r]:e))),i.set(r,l)),void 0!==l){var a=ht(l);return a===e?void 0:a}return Reflect.get(t,r,s)},getOwnPropertyDescriptor(t,n){var r=Reflect.getOwnPropertyDescriptor(t,n);if(r&&"value"in r){var o=i.get(n);o&&(r.value=ht(o));}else if(void 0===r){var s=i.get(n),l=s?.v;if(void 0!==s&&l!==e)return {enumerable:true,configurable:true,value:l,writable:true}}return r},has(t,n){if(n===E)return  true;var r=i.get(n),s=void 0!==r&&r.v!==e||Reflect.has(t,n);return !((void 0!==r||null!==Je&&(!s||o(t,n)?.writable))&&(void 0===r&&(r=d(()=>he(s?me(t[n]):e)),i.set(n,r)),ht(r)===e))&&s},set(t,n,r,l){var f=i.get(n),a=n in t;if(s&&"length"===n)for(var u=r;u<f.v;u+=1){var h=i.get(u+"");void 0!==h?ve(h,e):u in t&&(h=d(()=>he(e)),i.set(u+"",h));} void 0===f?a&&!o(t,n)?.writable||(ve(f=d(()=>he(void 0)),me(r)),i.set(n,f)):(a=f.v!==e,ve(f,d(()=>me(r))));var v=Reflect.getOwnPropertyDescriptor(t,n);if(v?.set&&v.set.call(l,r),!a){if(s&&"string"==typeof n){var p=i.get("length"),g=+n;Number.isInteger(g)&&g>=p.v&&ve(p,g+1);}ge(c);}return  true},ownKeys(t){ht(c);var n=Reflect.ownKeys(t).filter(t=>{var n=i.get(t);return void 0===n||n.v!==e});for(var[r,o]of i)o.v===e||r in t||n.push(r);return n},setPrototypeOf(){!function(){throw Error("https://svelte.dev/e/state_prototype_fixed")}();}})}var ye,be,we,Se;function ke(e=""){return document.createTextNode(e)}function xe(e){return we.call(e)}function $e(e){return Se.call(e)}function Me(e,t){return xe(e)}function Ee(e){var t=Ke,n=Je;Ge(null),Xe(null);try{return e()}finally{Ge(t),Xe(n);}}function Ae(e,t,n){var r=Je;null!==r&&0!==(r.f&m)&&(e|=m);var i={ctx:q,deps:null,nodes:null,f:e|g|v,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{dt(i),i.f|=b;}catch(l){throw Ce(i),l}else null!==t&&ee(i);var o=i;if(n&&null===o.deps&&null===o.teardown&&null===o.nodes&&o.first===o.last&&0===(o.f&k)&&(o=o.first,0!==(e&h)&&0!==(e&w)&&null!==o&&(o.f|=w)),null!==o&&(o.parent=r,null!==r&&function(e,t){var n=t.last;null===n?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e);}(o,r),null!==Ke&&2&Ke.f&&!(64&e))){var s=Ke;(s.effects??=[]).push(o);}return i}function je(){return null!==Ke&&!Ye}function Ne(e){return Ae(1048580,e,false)}function Oe(e,t=[],n=[],r=[]){!function(e,t,n,r){const i=L()?re:oe;if(0!==n.length||0!==e.length){var o,s,l,f,a=H,c=Je,u=(o=Je,s=Ke,l=q,f=H,function(e=true){Xe(o),Ge(s),D(l),e&&f?.activate();});e.length>0?Promise.all(e).then(()=>{u();try{return d()}finally{a?.deactivate(),ne();}}):d();}else r(t.map(i));function d(){Promise.all(n.map(e=>ie(e))).then(e=>{u();try{r([...t.map(i),...e]);}catch(n){0===(c.f&y)&&U(n,c);}a?.deactivate(),ne();}).catch(e=>{U(e,c);});}}(r,t,n,t=>{Ae(8,()=>e(...t.map(ht)),!0);});}function Pe(e,t=0){return Ae(h|t,e,true)}function qe(e){return Ae(524320,e,true)}function De(e){var t=e.teardown;if(null!==t){const e=Fe,n=Ke;Ve(true),Ge(null);try{t.call(null);}finally{Ve(e),Ge(n);}}}function Te(e,t=false){var n=e.first;for(e.first=e.last=null;null!==n;){const e=n.ac;null!==e&&Ee(()=>{e.abort(j);});var r=n.next;64&n.f?n.parent=null:Ce(n,t),n=r;}}function Ce(e,t=true){var n=false;!t&&0===(e.f&S)||null===e.nodes||null===e.nodes.end||(function(e,t){for(;null!==e;){var n=e===t?null:$e(e);e.remove(),e=n;}}(e.nodes.start,e.nodes.end),n=true),Te(e,t&&!n),ut(e,0),_t(e,y);var r=e.nodes&&e.nodes.t;if(null!==r)for(const o of r)o.stop();De(e);var i=e.parent;null!==i&&null!==i.first&&Le(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null;}function Le(e){var t=e.parent,n=e.prev,r=e.next;null!==n&&(n.next=r),null!==r&&(r.prev=n),null!==t&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n));}function ze(e,t,n=true){var r=[];Re(e,r,true);var i=()=>{n&&Ce(e),t&&t();},o=r.length;if(o>0){var s=()=>--o||i();for(var l of r)l.out(s);}else i();}function Re(e,t,n){if(0===(e.f&m)){e.f^=m;var r=e.nodes&&e.nodes.t;if(null!==r)for(const e of r)(e.is_global||n)&&t.push(e);for(var i=e.first;null!==i;){var o=i.next;Re(i,t,!!(0!==(i.f&w)||32&i.f&&0!==(e.f&h))&&n),i=o;}}}function Ie(e){Ue(e,true);}function Ue(e,t){if(0!==(e.f&m)){e.f^=m,0===(e.f&p)&&(_t(e,g),ee(e));for(var n=e.first;null!==n;){var r=n.next;Ue(n,!!(0!==(n.f&w)||32&n.f)&&t),n=r;}var i=e.nodes&&e.nodes.t;if(null!==i)for(const e of i)(e.is_global||t)&&e.in();}}function Be(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;null!==n;){var i=n===r?null:$e(n);t.append(n),n=i;}}let He=false;function We(e){He=e;}let Fe=false;function Ve(e){Fe=e;}let Ke=null,Ye=false;function Ge(e){Ke=e;}let Je=null;function Xe(e){Je=e;}let Qe=null,Ze=null,et=0,tt=null,nt=1,rt=0,it=rt;function ot(e){it=e;}function st(){return ++nt}function lt(e){var t=e.f;if(0!==(t&g))return  true;if(2&t&&(e.f&=-32769),0!==(t&_)){var n=e.deps;if(null!==n)for(var r=n.length,i=0;i<r;i++){var o=n[i];if(lt(o)&&fe(o),o.wv>e.wv)return  true}0!==(t&v)&&null===W&&_t(e,p);}return  false}function ft(e,t,n=true){var r=e.reactions;if(null!==r&&!Qe?.includes(e))for(var i=0;i<r.length;i++){var o=r[i];2&o.f?ft(o,t,false):t===o&&(n?_t(o,g):0!==(o.f&p)&&_t(o,_),ee(o));}}function at(e){var t=Ze,n=et,r=tt,i=Ke,o=Qe,s=q,l=Ye,f=it;Ze=null,et=0,tt=null,Ke=96&e.f?null:e,Qe=null,D(e.ctx),Ye=false,it=++rt,null!==e.ac&&(Ee(()=>{e.ac.abort(j);}),e.ac=null);try{e.f|=$;var a=(0,e.fn)(),c=e.deps;if(null!==Ze){var u;if(ut(e,et),null!==c&&et>0)for(c.length=et+Ze.length,u=0;u<Ze.length;u++)c[et+u]=Ze[u];else e.deps=c=Ze;if(je()&&0!==(e.f&v))for(u=et;u<c.length;u++)(c[u].reactions??=[]).push(e);}else null!==c&&et<c.length&&(ut(e,et),c.length=et);if(L()&&null!==tt&&!Ye&&null!==c&&!(6146&e.f))for(u=0;u<tt.length;u++)ft(tt[u],e);return null!==i&&i!==e&&(rt++,null!==tt&&(null===r?r=tt:r.push(...tt))),0!==(e.f&M)&&(e.f^=M),a}catch(d){return I(d)}finally{e.f^=$,Ze=t,et=n,tt=r,Ke=i,Qe=o,D(s),Ye=l,it=f;}}function ct(e,t){let r=t.reactions;if(null!==r){var i=n.call(r,e);if(-1!==i){var o=r.length-1;0===o?r=t.reactions=null:(r[i]=r[o],r.pop());}}null===r&&2&t.f&&(null===Ze||!Ze.includes(t))&&(_t(t,_),0!==(t.f&v)&&(t.f^=v,t.f&=-32769),se(t),ut(t,0));}function ut(e,t){var n=e.deps;if(null!==n)for(var r=t;r<n.length;r++)ct(e,n[r]);}function dt(e){var t=e.f;if(0===(t&y)){_t(e,p);var n=Je,r=He;Je=e,He=true;try{16777232&t?function(e){for(var t=e.first;null!==t;){var n=t.next;!(32&t.f)&&Ce(t),t=n;}}(e):Te(e),De(e);var i=at(e);e.teardown="function"==typeof i?i:null,e.wv=nt;}finally{He=r,Je=n;}}}function ht(e){var t=!!(2&e.f);if(!(null===Ke||Ye||null!==Je&&0!==(Je.f&y)||Qe?.includes(e))){var n=Ke.deps;if(0!==(Ke.f&$))e.rv<rt&&(e.rv=rt,null===Ze&&null!==n&&n[et]===e?et++:null===Ze?Ze=[e]:Ze.includes(e)||Ze.push(e));else {(Ke.deps??=[]).push(e);var r=e.reactions;null===r?e.reactions=[Ke]:r.includes(Ke)||r.push(Ke);}}if(Fe){if(ce.has(e))return ce.get(e);if(t){var i=e,o=i.v;return (0===(i.f&p)&&null!==i.reactions||pt(i))&&(o=le(i)),ce.set(i,o),o}}else t&&(!W?.has(e)||H?.is_fork&&!je())&&(lt(i=e)&&fe(i),He&&je()&&0===(i.f&v)&&vt(i));if(W?.has(e))return W.get(e);if(0!==(e.f&M))throw e.v;return e.v}function vt(e){if(null!==e.deps){e.f^=v;for(const t of e.deps)(t.reactions??=[]).push(e),2&t.f&&0===(t.f&v)&&vt(t);}}function pt(t){if(t.v===e)return  true;if(null===t.deps)return  false;for(const e of t.deps){if(ce.has(e))return  true;if(2&e.f&&pt(e))return  true}return  false}const gt=-7169;function _t(e,t){e.f=e.f&gt|t;}const mt=new Set,yt=new Set;let bt=null;function wt(e){var t=this,n=t.ownerDocument,r=e.type,o=e.composedPath?.()||[],s=o[0]||e.target;bt=e;var l=0,f=bt===e&&e.__root;if(f){var a=o.indexOf(f);if(-1!==a&&(t===document||t===window))return void(e.__root=t);var c=o.indexOf(t);if(-1===c)return;a<=c&&(l=a);}if((s=o[l]||e.target)!==t){i(e,"currentTarget",{configurable:true,get:()=>s||n});var u=Ke,d=Je;Ge(null),Xe(null);try{for(var h,v=[];null!==s;){var p=s.assignedSlot||s.parentNode||s.host||null;try{var g=s["__"+r];null==g||s.disabled&&e.target!==s||g.call(s,e);}catch(_){h?v.push(_):h=_;}if(e.cancelBubble||p===t||null===p)break;s=p;}if(h){for(let e of v)queueMicrotask(()=>{throw e});throw h}}finally{e.__root=t,delete e.currentTarget,Ge(u),Xe(d);}}}function St(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","\x3c!----\x3e"),t.content}function kt(e,t){null===Je.nodes&&(Je.nodes={start:e,end:t,a:null,t:null});}function xt(e,t){var n,i=!e.startsWith("<!>");return ()=>{ void 0===n&&(n=xe(n=St(i?e:"<!>"+e)));var t=be?document.importNode(n,true):n.cloneNode(true);return kt(t,t),t}}function $t(e,t,n="svg"){var r,i=`<${n}>${e.startsWith("<!>")?"<!>"+e:e}</${n}>`;return ()=>{if(!r){var e=St(i);r=xe(xe(e));}var t=r.cloneNode(true);return kt(t,t),t}}function Mt(e,t){return $t(e,0,"svg")}function Et(e,t){null!==e&&e.before(t);}const At=["touchstart","touchmove"];function jt(e){return At.includes(e)}const Nt=new Map;let Ot=new WeakMap;class Pt{anchor;#q=new Map;#D=new Map;#T=new Map;#C=new Set;#L=true;constructor(e,t=true){this.anchor=e,this.#L=t;}#u=()=>{var e=H;if(this.#q.has(e)){var t=this.#q.get(e),n=this.#D.get(t);if(n)Ie(n),this.#C.delete(t);else {var r=this.#T.get(t);r&&(this.#D.set(t,r.effect),this.#T.delete(t),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),n=r.effect);}for(const[t,n]of this.#q){if(this.#q.delete(t),t===e)break;const r=this.#T.get(n);r&&(Ce(r.effect),this.#T.delete(n));}for(const[e,r]of this.#D){if(e===t||this.#C.has(e))continue;const i=()=>{if(Array.from(this.#q.values()).includes(e)){var t=document.createDocumentFragment();Be(r,t),t.append(ke()),this.#T.set(e,{effect:r,fragment:t});}else Ce(r);this.#C.delete(e),this.#D.delete(e);};this.#L||!n?(this.#C.add(e),ze(r,i,false)):i();}}};#z=e=>{this.#q.delete(e);const t=Array.from(this.#q.values());for(const[n,r]of this.#T)t.includes(n)||(Ce(r.effect),this.#T.delete(n));};ensure(e,t){var n=H;!t||this.#D.has(e)||this.#T.has(e)||this.#D.set(e,qe(()=>t(this.anchor))),this.#q.set(n,e),this.#u();}}const qt=[..." \t\n\r\f \v\ufeff"],Dt=Symbol("is custom element"),Tt=Symbol("is html");function Ct(e,t,n,r){var i=function(e){return e.__attributes??={[Dt]:e.nodeName.includes("-"),[Tt]:"http://www.w3.org/1999/xhtml"===e.namespaceURI}}(e);i[t]!==(i[t]=n)&&("loading"===t&&(e[A]=n),null==n?e.removeAttribute(t):"string"!=typeof n&&function(e){var t,n=e.getAttribute("is")||e.nodeName,r=Lt.get(n);if(r)return r;Lt.set(n,r=[]);for(var i=e,o=Element.prototype;o!==i;){for(var l in t=s(i))t[l].set&&r.push(l);i=a(i);}return r}(e).includes(t)?e[t]=n:e.setAttribute(t,n));}var Lt=new Map;function zt(e,t,n,r){var i=r,o=true,s=()=>(o&&(o=false,i=r),i);return void 0===e[t]&&void 0!==r&&s(),()=>{var n=e[t];return void 0===n?s():(o=true,n)}}function Rt(e,t,n,i){if(!t)return;const s="svc-"+(e.name||"component");if(t.querySelector("."+s))return;const l=document.createElement("div");l.className=s,i&&Object.assign(l.style,i),t.append(l),function(e,{target:t,anchor:n,props:i={},events:s,context:l,intro:f=true}){!function(){if(void 0===ye){ye=window,be=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;we=o(t,"firstChild").get,Se=o(t,"nextSibling").get,c(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),c(n)&&(n.__t=void 0);}}();var a=new Set,u=e=>{for(var n=0;n<e.length;n++){var r=e[n];if(!a.has(r)){a.add(r);var i=jt(r);t.addEventListener(r,wt,{passive:i});var o=Nt.get(r);void 0===o?(document.addEventListener(r,wt,{passive:i}),Nt.set(r,1)):Nt.set(r,o+1);}}};u(r(mt)),yt.add(u);var d=void 0,h=function(){Y.ensure();const r=Ae(524352,()=>{var r=n??t.appendChild(ke());return new te(r,{pending:()=>{}},t=>{l&&(T({}),q.c=l),s&&(i.$$events=s),d=e(t,i)||{},l&&C();}),()=>{for(var e of a){t.removeEventListener(e,wt);var i=Nt.get(e);0===--i?(document.removeEventListener(e,wt),Nt.delete(e)):Nt.set(e,i);}yt.delete(u),r!==n&&r.parentNode?.removeChild(r);}},true);return (e={})=>new Promise(t=>{e.outro?ze(r,()=>{Ce(r),t(void 0);}):(Ce(r),t(void 0));})}();Ot.set(d,h);}(e,{target:l,props:n});}var It=xt("<span> </span>");var Ut=xt('<button type="button" class="IconButton svelte-1z0r1g6"><!></button>');!function(e){for(var t=0;t<e.length;t++)mt.add(e[t]);for(var n of yt)n(e);}(["click"]),P=true;var Bt=Mt('<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false" class="svelte-1nzdrgw"><path d="M22 6v16h-16v-16h16zm2-2h-20v20h20v-20zm-24 17v-21h21v2h-19v19h-2zm18-8h-3v-3h-2v3h-3v2h3v3h2v-3h3v-2z"></path></svg>');function Ht(e){if(!e)return "";const t=document.createElement("textarea");return t.innerHTML=e,t.value}function Wt(e){return (e+"").padStart(2,"0")}function Ft(e){return e.replace(/:/g,"")}var Vt=xt('<div class="GrabIMBDDetails svelte-1oywuru"><!> <!></div>');!function(e){function t(){for(const t of e)Rt(t.component,t.target,t.props,t.styles);}t(),new MutationObserver(t).observe(document.body,{childList:true,subtree:true});}([{component:function(e,t){T(t,true);let n=he(0);var r=Vt(),i=Me(r);((function(e,t){var n=Ut();n.__click=function(...e){t.onclick?.apply(this,e);},function(e,t,...n){var r=new Pt(e);Pe(()=>{const e=t()??null;r.ensure(e,e&&(t=>e(t,...n)));},w);}(Me(n),()=>t.children??u),Oe(()=>{Ct(n,"title",t.title),Ct(n,"aria-label",t.title);}),Et(e,n);}))(i,{title:"Grab IMDB details",onclick:async function(){try{!function(e,t=1){var n=ht(e);1===t?n++:n--,ve(e,n);}(n);const e=function(e){const{name:t="",originalName:n="",category:r="",rating:i="",runtime:o="",certification:s="",countries:l=[],languages:f=[],imdbLink:a="",description:c="",posters:u,createdAt:d="",genre:h=[],years:v,zettelId:p=""}=e||{},g=h.map(e=>"  - "+e).join("\n");return `---\nName: ${t}\nYear: ${v?.yearStart||""}\npg: ${s}\nSymbol:\nOriginal Name: ${n}\nCategory: ${r}\nLanguage: ${f[0]||""}\nCountry: ${l[0]||""}\nIMDB: ${i}\nRuntime: ${o}\nRotten:\nDetails: ${a}\ntags:\n${g}\nPoster: ${u?.normal||""}\nIn Watchlist: true\nWatched on:\nCreated at: ${d}\n---\n#watchList\n\n# ${t} (${v?.yearStart||""})\n\n![poster](${u?.small||""})\n\n${c}\n\n${p}\n`}(function(){const e=function(){const e=document.querySelector('[type="application/ld+json"]');if(!e)return {};try{return JSON.parse(e.innerHTML)}catch{return {}}}(),t=Ht(Ft(e.alternateName||e.name||"")),n=Ht(Ft(e.name||"")),r=function(e,t){if(t.includes("Documentary"))return "Documentary";const n=document.querySelector('[data-testid="interests"]')?.querySelectorAll("a");if(n)for(let r=0;r<n.length;r++)if("Anime"===n[r].textContent?.trim())return "Anime";return "TVSeries"===e?"TV Series":"Movie"}(e["@type"]||"",e.genre||[]),i=e.aggregateRating?.ratingValue?.toString(),o=e.contentRating,s=e.url||"",l=Ht(e.description),f={normal:e.image||"",small:e.image?e.image.replace(".jpg","_UX200_.jpg"):""},a=function(e){if(!e?.startsWith("PT"))return;const t=e.substring(2),n=t.match(/(\d+)H/),r=t.match(/(\d+)M/),i=[];return n&&i.push(n[1]+"h"),r&&i.push(r[1]+"m"),i.join(" ")}(e.duration),c=function(){const e=document.querySelector('[data-testid="title-details-origin"]')?.querySelectorAll("ul li");if(!e||!e.length)return ["US"];const t=[];return e.forEach(e=>{const n=e.textContent?.trim();n&&t.push("United States"===n?"US":"United Kingdom"===n?"UK":n);}),t.length?t:["US"]}(),u=function(){const e=document.querySelector('[data-testid="title-details-languages"]')?.querySelectorAll("ul li");if(!e||!e.length)return ["English"];const t=[];return e.forEach(e=>{const n=e.textContent?.trim();n&&t.push(n);}),t.length?t:["English"]}(),d=function(){const e=(document.title||"").match(/(\d{4})(?:[–-](\d{4})?)?/);return {yearStart:e?+e[1]:void 0,yearEnd:e?.[2]?+e[2]:void 0}}(),h=`${(v=new Date).getFullYear()}-${Wt(v.getMonth()+1)}-${Wt(v.getDate())}T${Wt(v.getHours())}:${Wt(v.getMinutes())}:${Wt(v.getSeconds())}`;var v;const p=function(e){const t=e=>(""+e).padStart(2,"0");return ""+e.getFullYear()+t(e.getMonth()+1)+t(e.getDate())+t(e.getHours())+t(e.getMinutes())}(new Date);return {name:t,originalName:n,category:r,rating:i,certification:o,genre:e.genre||[],years:d,runtime:a,imdbLink:s,countries:c,languages:u,description:l,posters:f,createdAt:h,zettelId:p}}());await async function(e){if("undefined"==typeof navigator||!navigator.clipboard)throw Error("copyToClipboard can only be used in the browser with clipboard support");try{await navigator.clipboard.writeText(e);}catch(t){throw console.error("Unable to copy text to clipboard.",t),t}}(e);}catch(e){console.log("debug:",e);}},children:(e,t)=>{!function(e){Et(e,Bt());}(e);}}),function(e,t){T(t,true);const n=zt(t,"trigger",0,0),r=zt(t,"duration",0,2e3);let i=he(false),o=null,s=false;!function(e){null===Je&&(null===Ke&&function(){throw Error("https://svelte.dev/e/effect_orphan")}(),function(){throw Error("https://svelte.dev/e/effect_in_unowned_derived")}()),Fe&&function(){throw Error("https://svelte.dev/e/effect_in_teardown")}();var t=Je.f;if(Ke||!(32&t)||0!==(t&b))return Ne(e);var n=q;(n.e??=[]).push(e);}(()=>{if(n(),s)return ve(i,true),o&&clearTimeout(o),o=setTimeout(()=>{ve(i,false);},r()),()=>{o&&(clearTimeout(o),o=null);};s=true;});var l=It();let f;var a=Me(l);Oe(()=>{f=function(e,t,n,r,i,o){var s=e.__className;if(s!==n||void 0===s){var l=function(e,t,n){var r=""+e;if(n)for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,s=0;(s=r.indexOf(i,s))>=0;){var l=s+o;0!==s&&!qt.includes(r[s-1])||l!==r.length&&!qt.includes(r[l])?s=l:r=(0===s?"":r.substring(0,s))+r.substring(l+1);}return ""===r?null:r}(n,0,o);null==l?e.removeAttribute("class"):e.className=l,e.__className=n;}else if(o&&i!==o)for(var f in o){var a=!!o[f];null!=i&&a===!!i[f]||e.classList.toggle(f,a);}return o}(l,0,"ActionTooltip svelte-8g2rx8",0,f,{show:ht(i)}),function(e,t){var n=null==t?"":"object"==typeof t?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"");}(a,t.description);}),Et(e,l),C();}(function(e,t=1){let n=e;for(;t--;)n=$e(n);return n}(i,2),{description:"Copied!",get trigger(){return ht(n)}}),Et(e,r),C();},target:document.querySelector('[data-testid="hero__pageTitle"]'),styles:{display:"inline-flex"}}]);

})();