// ==UserScript==
// @name         Imdb Obsidian Base Watchlist
// @namespace    https://github.com/siddacool/automation-scripts/tree/main/scripts/imdb-obsidian-base-watchlist
// @version      2.3.2
// @author       siddacool
// @description  Copy IMDB data to Markdown for Obsidian base
// @icon         https://www.google.com/s2/favicons?sz=64&domain=https://www.imdb.com/
// @source       https://github.com/siddacool/automation-scripts/tree/main/scripts/imdb-obsidian-base-watchlist
// @downloadURL  https://raw.githubusercontent.com/siddacool/automation-scripts/gh-pages/packages/imdb-obsidian-base-watchlist/imdb-obsidian-base-watchlist.user.js
// @updateURL    https://raw.githubusercontent.com/siddacool/automation-scripts/gh-pages/packages/imdb-obsidian-base-watchlist/imdb-obsidian-base-watchlist.meta.js
// @match        https://www.imdb.com/title/*
// @grant        none
// ==/UserScript==

(function () {
	'use strict';

	const d$1=new Set;const t$1 = async e=>{d$1.has(e)||(d$1.add(e),(t=>{typeof GM_addStyle=="function"?GM_addStyle(t):(document.head||document.documentElement).appendChild(document.createElement("style")).append(t);})(e));};

	t$1(' @charset "UTF-8";.ActionTooltip.svelte-8g2rx8{position:absolute;top:40px;left:-7px;font-size:.8rem;width:55px;height:30px;background-color:#000;border-radius:4px;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .2s ease}.ActionTooltip.show.svelte-8g2rx8{opacity:1;pointer-events:auto}button.svelte-1z0r1g6{width:40px;height:40px;display:flex;background:transparent;border:0;align-items:center;justify-content:center;cursor:pointer;border-radius:50%;transition:all .1s;color:#fff;font-size:1.2rem;padding:0}button.svelte-1z0r1g6:focus-visible{outline:2px solid #f5c518;outline-offset:2px;background:#00000040}button.svelte-1z0r1g6:hover{color:#f5c518;background:#00000040}svg.svelte-1nzdrgw{position:relative;left:1px}.GrabIMBDDetails.svelte-1oywuru{position:relative;display:inline-flex;top:-3px} ');

	"undefined"!=typeof window&&((window.__svelte??={}).v??=new Set).add("5");const e=Symbol();var t=Array.isArray,n=Array.prototype.indexOf,r=Array.from,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyDescriptors,l=Object.prototype,f=Array.prototype,a=Object.getPrototypeOf,c=Object.isExtensible;const u=()=>{};function d(){var e,t;return {promise:new Promise((n,r)=>{e=n,t=r;}),resolve:e,reject:t}}const h=16,v=512,p=1024,g=2048,_=4096,m=8192,y=16384,b=32768,w=65536,S=1<<18,k=1<<19,x=32768,$=1<<21,M=1<<23,E=Symbol("$state"),A=Symbol(""),N=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function O(e){return e===this.v}let j=null;function P(e){j=e;}function D(e,t=false,n){j={p:j,i:false,c:null,e:null,s:e,x:null,l:null};}function T(e){var t=j,n=t.e;if(null!==n)for(var r of(t.e=null,n))Me(r);return t.i=true,j=t.p,{}}let q=[];function C(e){if(0===q.length){var t=q;queueMicrotask(()=>{t===q&&function(){var e=q;q=[],function(e){for(var t=0;t<e.length;t++)e[t]();}(e);}();});}q.push(e);}function L(e){var t=Ve;if(null===t)return He.f|=M,e;if(0===(t.f&b)){if(!(128&t.f))throw e;t.b.error(e);}else z(e,t);}function z(e,t){for(;null!==t;){if(128&t.f)try{return void t.b.error(e)}catch(n){e=n;}t=t.parent;}throw e}const R=new Set;let I=null,U=null,B=[],H=null,W=false;class F{committed=false;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#i=null;#s=new Set;#o=new Set;skipped_effects=new Set;is_fork=false;is_deferred(){return this.is_fork||this.#r>0}process(e){B=[],this.apply();var t={parent:null,effect:null,effects:[],render_effects:[]};for(const n of e)this.#l(n,t);this.is_fork||this.#f(),this.is_deferred()?(this.#a(t.effects),this.#a(t.render_effects)):(I=null,Y(t.render_effects),Y(t.effects),this.#i?.resolve()),U=null;}#l(e,t){e.f^=p;for(var n=e.first;null!==n;){var r=n.f,i=!!(96&r),s=i&&0!==(r&p)||0!==(r&m)||this.skipped_effects.has(n);if(!!(128&n.f)&&n.b?.is_pending()&&(t={parent:t,effect:n,effects:[],render_effects:[]}),!s&&null!==n.fn){i?n.f^=p:4&r?t.effects.push(n):rt(n)&&(0!==(n.f&h)&&this.#s.add(n),ft(n));var o=n.first;if(null!==o){n=o;continue}}var l=n.parent;for(n=n.next;null===n&&null!==l;)l===t.effect&&(this.#a(t.effects),this.#a(t.render_effects),t=t.parent),n=l.next,l=l.parent;}}#a(e){for(const t of e)0!==(t.f&g)?this.#s.add(t):0!==(t.f&_)&&this.#o.add(t),this.#c(t.deps),ht(t,p);}#c(e){if(null!==e)for(const t of e)2&t.f&&0!==(t.f&x)&&(t.f^=x,this.#c(t.deps));}capture(e,t){this.previous.has(e)||this.previous.set(e,t),0===(e.f&M)&&(this.current.set(e,e.v),U?.set(e,e.v));}activate(){I=this,this.apply();}deactivate(){I===this&&(I=null,U=null);}flush(){if(this.activate(),B.length>0){if(function(){var e=Re;W=true;try{var t=0;for(Ie(!0);B.length>0;){var n=F.ensure();t++>1e3&&V(),n.process(B),oe.clear();}}finally{W=false,Ie(e),H=null;}}(),null!==I&&I!==this)return}else 0===this.#n&&this.process([]);this.deactivate();}discard(){for(const e of this.#t)e(this);this.#t.clear();}#f(){if(0===this.#r){for(const e of this.#e)e();this.#e.clear();}0===this.#n&&this.#u();}#u(){if(R.size>1){this.previous.clear();var e=U,t=true,n={parent:null,effect:null,effects:[],render_effects:[]};for(const e of R){if(e===this){t=false;continue}const i=[];for(const[n,r]of this.current){if(e.current.has(n)){if(!t||r===e.current.get(n))continue;e.current.set(n,r);}i.push(n);}if(0===i.length)continue;const s=[...e.current.keys()].filter(e=>!this.current.has(e));if(s.length>0){var r=B;B=[];const t=new Set,o=new Map;for(const e of i)G(e,s,t,o);if(B.length>0){I=e,e.apply();for(const t of B)e.#l(t,n);e.deactivate();}B=r;}}I=null,U=e;}this.committed=true,R.delete(this);}increment(e){this.#n+=1,e&&(this.#r+=1);}decrement(e){this.#n-=1,e&&(this.#r-=1),this.revive();}revive(){for(const e of this.#s)this.#o.delete(e),ht(e,g),X(e);for(const e of this.#o)ht(e,_),X(e);this.flush();}oncommit(e){this.#e.add(e);}ondiscard(e){this.#t.add(e);}settled(){return (this.#i??=d()).promise}static ensure(){if(null===I){const e=I=new F;R.add(I),F.enqueue(()=>{I===e&&e.flush();});}return I}static enqueue(e){C(e);}apply(){}}function V(){try{!function(){throw Error("https://svelte.dev/e/effect_update_depth_exceeded")}();}catch(e){z(e,H);}}let K=null;function Y(e){var t=e.length;if(0!==t){for(var n=0;n<t;){var r=e[n++];if(!(24576&r.f)&&rt(r)&&(K=new Set,ft(r),null===r.deps&&null===r.first&&null===r.nodes&&(null===r.teardown&&null===r.ac?De(r):r.fn=null),K?.size>0)){oe.clear();for(const e of K){if(24576&e.f)continue;const t=[e];let n=e.parent;for(;null!==n;)K.has(n)&&(K.delete(n),t.push(n)),n=n.parent;for(let e=t.length-1;e>=0;e--){const n=t[e];24576&n.f||ft(n);}}K.clear();}}K=null;}}function G(e,t,n,r){if(!n.has(e)&&(n.add(e),null!==e.reactions))for(const i of e.reactions){const e=i.f;2&e?G(i,t,n,r):4194320&e&&0===(e&g)&&J(i,t,r)&&(ht(i,g),X(i));}}function J(e,t,n){const r=n.get(e);if(void 0!==r)return r;if(null!==e.deps)for(const i of e.deps){if(t.includes(i))return  true;if(2&i.f&&J(i,t,n))return n.set(i,true),true}return n.set(e,false),false}function X(e){for(var t=H=e;null!==t.parent;){var n=(t=t.parent).f;if(W&&t===Ve&&0!==(n&h)&&0===(n&S))return;if(96&n){if(0===(n&p))return;t.f^=p;}}B.push(t);}class Q{parent;#n=false;#d;#h=null;#v;#p;#g;#_=null;#m=null;#y=null;#b=null;#w=null;#S=0;#k=0;#x=false;#$=null;#M=function(e){let t,n=0,r=fe(0);return ()=>{$e()&&(at(r),function(e,t=0){xe(8|t,e,true);}(()=>(0===n&&(t=function(){var t=We;try{return We=!0,e(()=>de(r))}finally{We=t;}}()),n+=1,()=>{C(()=>{n-=1,0===n&&(t?.(),t=void 0,de(r));});})));}}(()=>(this.#$=fe(this.#S),()=>{this.#$=null;}));constructor(e,t,n){this.#d=e,this.#v=t,this.#p=n,this.parent=Ve.b,this.#n=!!this.#v.pending,this.#g=Ae(()=>{Ve.b=this;var e=this.#E();try{this.#_=Ne(()=>n(e));}catch(t){this.error(t);}return this.#k>0?this.#A():this.#n=false,()=>{this.#w?.remove();}},589952);}#N(){try{this.#_=Ne(()=>this.#p(this.#d));}catch(e){this.error(e);}this.#n=false;}#O(){const e=this.#v.pending;e&&(this.#m=Ne(()=>e(this.#d)),F.enqueue(()=>{var e=this.#E();this.#_=this.#j(()=>(F.ensure(),Ne(()=>this.#p(e)))),this.#k>0?this.#A():(Te(this.#m,()=>{this.#m=null;}),this.#n=false);}));}#E(){var e=this.#d;return this.#n&&(this.#w=ye(),this.#d.before(this.#w),e=this.#w),e}is_pending(){return this.#n||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return !!this.#v.pending}#j(e){var t=Ve,n=He,r=j;Ke(this.#g),Fe(this.#g),P(this.#g.ctx);try{return e()}catch(i){return L(i),null}finally{Ke(t),Fe(n),P(r);}}#A(){const e=this.#v.pending;null!==this.#_&&(this.#b=document.createDocumentFragment(),this.#b.append(this.#w),ze(this.#_,this.#b)),null===this.#m&&(this.#m=Ne(()=>e(this.#d)));}#P(e){this.has_pending_snippet()?(this.#k+=e,0===this.#k&&(this.#n=false,this.#m&&Te(this.#m,()=>{this.#m=null;}),this.#b&&(this.#d.before(this.#b),this.#b=null))):this.parent&&this.parent.#P(e);}update_pending_count(e){this.#P(e),this.#S+=e,this.#$&&ue(this.#$,this.#S);}get_effect_pending(){return this.#M(),at(this.#$)}error(e){var t=this.#v.onerror;let n=this.#v.failed;if(this.#x||!t&&!n)throw e;this.#_&&(Pe(this.#_),this.#_=null),this.#m&&(Pe(this.#m),this.#m=null),this.#y&&(Pe(this.#y),this.#y=null);var r=false,i=false;const s=()=>{r?console.warn("https://svelte.dev/e/svelte_boundary_reset_noop"):(r=true,i&&function(){throw Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}(),F.ensure(),this.#S=0,null!==this.#y&&Te(this.#y,()=>{this.#y=null;}),this.#n=this.has_pending_snippet(),this.#_=this.#j(()=>(this.#x=false,Ne(()=>this.#p(this.#d)))),this.#k>0?this.#A():this.#n=false);};var o=He;try{Fe(null),i=!0,t?.(e,s),i=!1;}catch(l){z(l,this.#g&&this.#g.parent);}finally{Fe(o);}n&&C(()=>{this.#y=this.#j(()=>{F.ensure(),this.#x=true;try{return Ne(()=>{n(this.#d,()=>e,()=>s);})}catch(l){return z(l,this.#g.parent),null}finally{this.#x=false;}});});}}function Z(){Ke(null),Fe(null),P(null);}function ee(t){var n=null!==He&&2&He.f?He:null;return null!==Ve&&(Ve.f|=k),{ctx:j,deps:null,effects:null,equals:O,f:2050,fn:t,reactions:null,rv:0,v:e,wv:0,parent:n??Ve,ac:null}}function te(t,n){let r=Ve;null===r&&function(){throw Error("https://svelte.dev/e/async_derived_orphan")}();var i=r.b,s=void 0,o=fe(e),l=!He,f=new Map;return function(e){xe(4718592,e,true);}(()=>{var e=d();s=e.promise;try{Promise.resolve(t()).then(e.resolve,e.reject).then(()=>{n===I&&n.committed&&n.deactivate(),Z();});}catch(c){e.reject(c),Z();}var n=I;if(l){var r=!i.is_pending();i.update_pending_count(1),n.increment(r),f.get(n)?.reject(N),f.delete(n),f.set(n,e);}const a=(e,t=void 0)=>{if(n.activate(),t)t!==N&&(o.f|=M,ue(o,t));else {0!==(o.f&M)&&(o.f^=M),ue(o,e);for(const[e,t]of f){if(f.delete(e),e===n)break;t.reject(N);}}l&&(i.update_pending_count(-1),n.decrement(r));};e.promise.then(a,e=>a(null,e||"unknown"));}),function(){const e=xe(8,null,false);ht(e,p),e.teardown=()=>{for(const e of f.values())e.reject(N);};}(),new Promise(e=>{!function t(n){function r(){n===s?e(o):t(s);}n.then(r,r);}(s);})}function ne(e){var t=e.effects;if(null!==t){e.effects=null;for(var n=0;n<t.length;n+=1)Pe(t[n]);}}function re(e){var t,n=Ve;Ke(function(e){for(var t=e.parent;null!==t;){if(!(2&t.f))return 0===(t.f&y)?t:null;t=t.parent;}return null}(e));try{e.f&=-32769,ne(e),t=st(e);}finally{Ke(n);}return t}function ie(e){var t=re(e);e.equals(t)||(I?.is_fork||(e.v=t),e.wv=nt()),Ue||(null!==U?($e()||I?.is_fork)&&U.set(e,t):ht(e,0===(e.f&v)?_:p));}let se=new Set;const oe=new Map;let le=false;function fe(e,t){return {f:0,v:e,reactions:null,equals:O,rv:0,wv:0}}function ae(e,t){const n=fe(e);var r;return r=n,null!==He&&(null===Ye?Ye=[r]:Ye.push(r)),n}function ce(e,t,n=false){return null===He||We&&!(131072&He.f)||!(4325394&He.f)||Ye?.includes(e)||function(){throw Error("https://svelte.dev/e/state_unsafe_mutation")}(),ue(e,n?ve(t):t)}function ue(e,t){if(!e.equals(t)){var n=e.v;oe.set(e,Ue?t:n),e.v=t;var r=F.ensure();r.capture(e,n),2&e.f&&(0!==(e.f&g)&&re(e),ht(e,0!==(e.f&v)?p:_)),e.wv=nt(),he(e,g),null===Ve||0===(Ve.f&p)||96&Ve.f||(null===Xe?function(e){Xe=e;}([e]):Xe.push(e)),!r.is_fork&&se.size>0&&!le&&function(){le=false;var e=Re;Ie(true);const t=Array.from(se);try{for(const e of t)0!==(e.f&p)&&ht(e,_),rt(e)&&ft(e);}finally{Ie(e);}se.clear();}();}return t}function de(e){ce(e,e.v+1);}function he(e,t){var n=e.reactions;if(null!==n)for(var r=n.length,i=0;i<r;i++){var s=n[i],o=s.f,l=0===(o&g);if(l&&ht(s,t),2&o){var f=s;U?.delete(f),0===(o&x)&&(o&v&&(s.f|=x),he(f,_));}else l&&(0!==(o&h)&&null!==K&&K.add(s),X(s));}}function ve(n){if("object"!=typeof n||null===n||E in n)return n;const r=a(n);if(r!==l&&r!==f)return n;var i=new Map,o=t(n),c=ae(0),u=et,d=e=>{if(et===u)return e();var t=He,n=et;Fe(null),tt(u);var r=e();return Fe(t),tt(n),r};return o&&i.set("length",ae(n.length)),new Proxy(n,{defineProperty(e,t,n){"value"in n&&false!==n.configurable&&false!==n.enumerable&&false!==n.writable||function(){throw Error("https://svelte.dev/e/state_descriptors_fixed")}();var r=i.get(t);return void 0===r?r=d(()=>{var e=ae(n.value);return i.set(t,e),e}):ce(r,n.value,true),true},deleteProperty(t,n){var r=i.get(n);if(void 0===r){if(n in t){const t=d(()=>ae(e));i.set(n,t),de(c);}}else ce(r,e),de(c);return  true},get(t,r,o){if(r===E)return n;var l=i.get(r),f=r in t;if(void 0!==l||f&&!s(t,r)?.writable||(l=d(()=>ae(ve(f?t[r]:e))),i.set(r,l)),void 0!==l){var a=at(l);return a===e?void 0:a}return Reflect.get(t,r,o)},getOwnPropertyDescriptor(t,n){var r=Reflect.getOwnPropertyDescriptor(t,n);if(r&&"value"in r){var s=i.get(n);s&&(r.value=at(s));}else if(void 0===r){var o=i.get(n),l=o?.v;if(void 0!==o&&l!==e)return {enumerable:true,configurable:true,value:l,writable:true}}return r},has(t,n){if(n===E)return  true;var r=i.get(n),o=void 0!==r&&r.v!==e||Reflect.has(t,n);return !((void 0!==r||null!==Ve&&(!o||s(t,n)?.writable))&&(void 0===r&&(r=d(()=>ae(o?ve(t[n]):e)),i.set(n,r)),at(r)===e))&&o},set(t,n,r,l){var f=i.get(n),a=n in t;if(o&&"length"===n)for(var u=r;u<f.v;u+=1){var h=i.get(u+"");void 0!==h?ce(h,e):u in t&&(h=d(()=>ae(e)),i.set(u+"",h));} void 0===f?a&&!s(t,n)?.writable||(ce(f=d(()=>ae(void 0)),ve(r)),i.set(n,f)):(a=f.v!==e,ce(f,d(()=>ve(r))));var v=Reflect.getOwnPropertyDescriptor(t,n);if(v?.set&&v.set.call(l,r),!a){if(o&&"string"==typeof n){var p=i.get("length"),g=+n;Number.isInteger(g)&&g>=p.v&&ce(p,g+1);}de(c);}return  true},ownKeys(t){at(c);var n=Reflect.ownKeys(t).filter(t=>{var n=i.get(t);return void 0===n||n.v!==e});for(var[r,s]of i)s.v===e||r in t||n.push(r);return n},setPrototypeOf(){!function(){throw Error("https://svelte.dev/e/state_prototype_fixed")}();}})}var pe,ge,_e,me;function ye(e=""){return document.createTextNode(e)}function be(e){return _e.call(e)}function we(e){return me.call(e)}function Se(e,t){return be(e)}function ke(e){var t=He,n=Ve;Fe(null),Ke(null);try{return e()}finally{Fe(t),Ke(n);}}function xe(e,t,n){var r=Ve;null!==r&&0!==(r.f&m)&&(e|=m);var i={ctx:j,deps:null,nodes:null,f:e|g|v,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{ft(i),i.f|=b;}catch(l){throw Pe(i),l}else null!==t&&X(i);var s=i;if(n&&null===s.deps&&null===s.teardown&&null===s.nodes&&s.first===s.last&&0===(s.f&k)&&(s=s.first,0!==(e&h)&&0!==(e&w)&&null!==s&&(s.f|=w)),null!==s&&(s.parent=r,null!==r&&function(e,t){var n=t.last;null===n?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e);}(s,r),null!==He&&2&He.f&&!(64&e))){var o=He;(o.effects??=[]).push(s);}return i}function $e(){return null!==He&&!We}function Me(e){return xe(1048580,e,false)}function Ee(e,t=[],n=[],r=[]){!function(e,t,n,r){const i=ee;if(0!==n.length||0!==e.length){var s,o,l,f,a=I,c=Ve,u=(s=Ve,o=He,l=j,f=I,function(e=true){Ke(s),Fe(o),P(l),e&&f?.activate();});e.length>0?Promise.all(e).then(()=>{u();try{return d()}finally{a?.deactivate(),Z();}}):d();}else r(t.map(i));function d(){Promise.all(n.map(e=>te(e))).then(e=>{u();try{r([...t.map(i),...e]);}catch(n){0===(c.f&y)&&z(n,c);}a?.deactivate(),Z();}).catch(e=>{z(e,c);});}}(r,t,n,t=>{xe(8,()=>e(...t.map(at)),!0);});}function Ae(e,t=0){return xe(h|t,e,true)}function Ne(e){return xe(524320,e,true)}function Oe(e){var t=e.teardown;if(null!==t){const e=Ue,n=He;Be(true),Fe(null);try{t.call(null);}finally{Be(e),Fe(n);}}}function je(e,t=false){var n=e.first;for(e.first=e.last=null;null!==n;){const e=n.ac;null!==e&&ke(()=>{e.abort(N);});var r=n.next;64&n.f?n.parent=null:Pe(n,t),n=r;}}function Pe(e,t=true){var n=false;!t&&0===(e.f&S)||null===e.nodes||null===e.nodes.end||(function(e,t){for(;null!==e;){var n=e===t?null:we(e);e.remove(),e=n;}}(e.nodes.start,e.nodes.end),n=true),je(e,t&&!n),lt(e,0),ht(e,y);var r=e.nodes&&e.nodes.t;if(null!==r)for(const s of r)s.stop();Oe(e);var i=e.parent;null!==i&&null!==i.first&&De(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null;}function De(e){var t=e.parent,n=e.prev,r=e.next;null!==n&&(n.next=r),null!==r&&(r.prev=n),null!==t&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n));}function Te(e,t,n=true){var r=[];qe(e,r,true);var i=()=>{n&&Pe(e),t&&t();},s=r.length;if(s>0){var o=()=>--s||i();for(var l of r)l.out(o);}else i();}function qe(e,t,n){if(0===(e.f&m)){e.f^=m;var r=e.nodes&&e.nodes.t;if(null!==r)for(const e of r)(e.is_global||n)&&t.push(e);for(var i=e.first;null!==i;){var s=i.next;qe(i,t,!!(0!==(i.f&w)||32&i.f&&0!==(e.f&h))&&n),i=s;}}}function Ce(e){Le(e,true);}function Le(e,t){if(0!==(e.f&m)){e.f^=m,0===(e.f&p)&&(ht(e,g),X(e));for(var n=e.first;null!==n;){var r=n.next;Le(n,!!(0!==(n.f&w)||32&n.f)&&t),n=r;}var i=e.nodes&&e.nodes.t;if(null!==i)for(const e of i)(e.is_global||t)&&e.in();}}function ze(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;null!==n;){var i=n===r?null:we(n);t.append(n),n=i;}}let Re=false;function Ie(e){Re=e;}let Ue=false;function Be(e){Ue=e;}let He=null,We=false;function Fe(e){He=e;}let Ve=null;function Ke(e){Ve=e;}let Ye=null,Ge=null,Je=0,Xe=null,Qe=1,Ze=0,et=Ze;function tt(e){et=e;}function nt(){return ++Qe}function rt(e){var t=e.f;if(0!==(t&g))return  true;if(2&t&&(e.f&=-32769),0!==(t&_)){var n=e.deps;if(null!==n)for(var r=n.length,i=0;i<r;i++){var s=n[i];if(rt(s)&&ie(s),s.wv>e.wv)return  true}0!==(t&v)&&null===U&&ht(e,p);}return  false}function it(e,t,n=true){var r=e.reactions;if(null!==r&&!Ye?.includes(e))for(var i=0;i<r.length;i++){var s=r[i];2&s.f?it(s,t,false):t===s&&(n?ht(s,g):0!==(s.f&p)&&ht(s,_),X(s));}}function st(e){var t=Ge,n=Je,r=Xe,i=He,s=Ye,o=j,l=We,f=et;Ge=null,Je=0,Xe=null,He=96&e.f?null:e,Ye=null,P(e.ctx),We=false,et=++Ze,null!==e.ac&&(ke(()=>{e.ac.abort(N);}),e.ac=null);try{e.f|=$;var a=(0,e.fn)(),c=e.deps;if(null!==Ge){var u;if(lt(e,Je),null!==c&&Je>0)for(c.length=Je+Ge.length,u=0;u<Ge.length;u++)c[Je+u]=Ge[u];else e.deps=c=Ge;if($e()&&0!==(e.f&v))for(u=Je;u<c.length;u++)(c[u].reactions??=[]).push(e);}else null!==c&&Je<c.length&&(lt(e,Je),c.length=Je);if(!(null===Xe||We||null===c||6146&e.f))for(u=0;u<Xe.length;u++)it(Xe[u],e);return null!==i&&i!==e&&(Ze++,null!==Xe&&(null===r?r=Xe:r.push(...Xe))),0!==(e.f&M)&&(e.f^=M),a}catch(d){return L(d)}finally{e.f^=$,Ge=t,Je=n,Xe=r,He=i,Ye=s,P(o),We=l,et=f;}}function ot(e,t){let r=t.reactions;if(null!==r){var i=n.call(r,e);if(-1!==i){var s=r.length-1;0===s?r=t.reactions=null:(r[i]=r[s],r.pop());}}null===r&&2&t.f&&(null===Ge||!Ge.includes(t))&&(ht(t,_),0!==(t.f&v)&&(t.f^=v,t.f&=-32769),ne(t),lt(t,0));}function lt(e,t){var n=e.deps;if(null!==n)for(var r=t;r<n.length;r++)ot(e,n[r]);}function ft(e){var t=e.f;if(0===(t&y)){ht(e,p);var n=Ve,r=Re;Ve=e,Re=true;try{16777232&t?function(e){for(var t=e.first;null!==t;){var n=t.next;!(32&t.f)&&Pe(t),t=n;}}(e):je(e),Oe(e);var i=st(e);e.teardown="function"==typeof i?i:null,e.wv=Qe;}finally{Re=r,Ve=n;}}}function at(e){var t=!!(2&e.f);if(!(null===He||We||null!==Ve&&0!==(Ve.f&y)||Ye?.includes(e))){var n=He.deps;if(0!==(He.f&$))e.rv<Ze&&(e.rv=Ze,null===Ge&&null!==n&&n[Je]===e?Je++:null===Ge?Ge=[e]:Ge.includes(e)||Ge.push(e));else {(He.deps??=[]).push(e);var r=e.reactions;null===r?e.reactions=[He]:r.includes(He)||r.push(He);}}if(Ue){if(oe.has(e))return oe.get(e);if(t){var i=e,s=i.v;return (0===(i.f&p)&&null!==i.reactions||ut(i))&&(s=re(i)),oe.set(i,s),s}}else t&&(!U?.has(e)||I?.is_fork&&!$e())&&(rt(i=e)&&ie(i),Re&&$e()&&0===(i.f&v)&&ct(i));if(U?.has(e))return U.get(e);if(0!==(e.f&M))throw e.v;return e.v}function ct(e){if(null!==e.deps){e.f^=v;for(const t of e.deps)(t.reactions??=[]).push(e),2&t.f&&0===(t.f&v)&&ct(t);}}function ut(t){if(t.v===e)return  true;if(null===t.deps)return  false;for(const e of t.deps){if(oe.has(e))return  true;if(2&e.f&&ut(e))return  true}return  false}const dt=-7169;function ht(e,t){e.f=e.f&dt|t;}const vt=new Set,pt=new Set;let gt=null;function _t(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],o=s[0]||e.target;gt=e;var l=0,f=gt===e&&e.__root;if(f){var a=s.indexOf(f);if(-1!==a&&(t===document||t===window))return void(e.__root=t);var c=s.indexOf(t);if(-1===c)return;a<=c&&(l=a);}if((o=s[l]||e.target)!==t){i(e,"currentTarget",{configurable:true,get:()=>o||n});var u=He,d=Ve;Fe(null),Ke(null);try{for(var h,v=[];null!==o;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var g=o["__"+r];null==g||o.disabled&&e.target!==o||g.call(o,e);}catch(_){h?v.push(_):h=_;}if(e.cancelBubble||p===t||null===p)break;o=p;}if(h){for(let e of v)queueMicrotask(()=>{throw e});throw h}}finally{e.__root=t,delete e.currentTarget,Fe(u),Ke(d);}}}function mt(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","\x3c!----\x3e"),t.content}function yt(e,t){null===Ve.nodes&&(Ve.nodes={start:e,end:t,a:null,t:null});}function bt(e,t){var n,i=!e.startsWith("<!>");return ()=>{ void 0===n&&(n=be(n=mt(i?e:"<!>"+e)));var t=ge?document.importNode(n,true):n.cloneNode(true);return yt(t,t),t}}function wt(e,t,n="svg"){var r,i=`<${n}>${e.startsWith("<!>")?"<!>"+e:e}</${n}>`;return ()=>{if(!r){var e=mt(i);r=be(be(e));}var t=r.cloneNode(true);return yt(t,t),t}}function St(e,t){return wt(e,0,"svg")}function kt(e,t){null!==e&&e.before(t);}const xt=["touchstart","touchmove"];function $t(e){return xt.includes(e)}const Mt=new Map;let Et=new WeakMap;class At{anchor;#D=new Map;#T=new Map;#q=new Map;#C=new Set;#L=true;constructor(e,t=true){this.anchor=e,this.#L=t;}#u=()=>{var e=I;if(this.#D.has(e)){var t=this.#D.get(e),n=this.#T.get(t);if(n)Ce(n),this.#C.delete(t);else {var r=this.#q.get(t);r&&(this.#T.set(t,r.effect),this.#q.delete(t),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),n=r.effect);}for(const[t,n]of this.#D){if(this.#D.delete(t),t===e)break;const r=this.#q.get(n);r&&(Pe(r.effect),this.#q.delete(n));}for(const[e,r]of this.#T){if(e===t||this.#C.has(e))continue;const i=()=>{if(Array.from(this.#D.values()).includes(e)){var t=document.createDocumentFragment();ze(r,t),t.append(ye()),this.#q.set(e,{effect:r,fragment:t});}else Pe(r);this.#C.delete(e),this.#T.delete(e);};this.#L||!n?(this.#C.add(e),Te(r,i,false)):i();}}};#z=e=>{this.#D.delete(e);const t=Array.from(this.#D.values());for(const[n,r]of this.#q)t.includes(n)||(Pe(r.effect),this.#q.delete(n));};ensure(e,t){var n=I;!t||this.#T.has(e)||this.#q.has(e)||this.#T.set(e,Ne(()=>t(this.anchor))),this.#D.set(n,e),this.#u();}}const Nt=[..." \t\n\r\f \v\ufeff"],Ot=Symbol("is custom element"),jt=Symbol("is html");function Pt(e,t,n,r){var i=function(e){return e.__attributes??={[Ot]:e.nodeName.includes("-"),[jt]:"http://www.w3.org/1999/xhtml"===e.namespaceURI}}(e);i[t]!==(i[t]=n)&&("loading"===t&&(e[A]=n),null==n?e.removeAttribute(t):"string"!=typeof n&&function(e){var t,n=e.getAttribute("is")||e.nodeName,r=Dt.get(n);if(r)return r;Dt.set(n,r=[]);for(var i=e,s=Element.prototype;s!==i;){for(var l in t=o(i))t[l].set&&r.push(l);i=a(i);}return r}(e).includes(t)?e[t]=n:e.setAttribute(t,n));}var Dt=new Map;function Tt(e,t,n,r){var i=r,s=true,o=()=>(s&&(s=false,i=r),i);return void 0===e[t]&&void 0!==r&&o(),()=>{var n=e[t];return void 0===n?o():(s=true,n)}}function qt(e,t,n,i){if(!t)return;const o="svc-"+(e.name||"component");if(t.querySelector("."+o))return;const l=document.createElement("div");l.className=o,i&&Object.assign(l.style,i),t.append(l),function(e,{target:t,anchor:n,props:i={},events:o,context:l,intro:f=true}){!function(){if(void 0===pe){pe=window,ge=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;_e=s(t,"firstChild").get,me=s(t,"nextSibling").get,c(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),c(n)&&(n.__t=void 0);}}();var a=new Set,u=e=>{for(var n=0;n<e.length;n++){var r=e[n];if(!a.has(r)){a.add(r);var i=$t(r);t.addEventListener(r,_t,{passive:i});var s=Mt.get(r);void 0===s?(document.addEventListener(r,_t,{passive:i}),Mt.set(r,1)):Mt.set(r,s+1);}}};u(r(vt)),pt.add(u);var d=void 0,h=function(){F.ensure();const r=xe(524352,()=>{var r=n??t.appendChild(ye());return new Q(r,{pending:()=>{}},t=>{l&&(D({}),j.c=l),o&&(i.$$events=o),d=e(t,i)||{},l&&T();}),()=>{for(var e of a){t.removeEventListener(e,_t);var i=Mt.get(e);0===--i?(document.removeEventListener(e,_t),Mt.delete(e)):Mt.set(e,i);}pt.delete(u),r!==n&&r.parentNode?.removeChild(r);}},true);return (e={})=>new Promise(t=>{e.outro?Te(r,()=>{Pe(r),t(void 0);}):(Pe(r),t(void 0));})}();Et.set(d,h);}(e,{target:l,props:n});}var Ct=bt("<span> </span>");var Lt=bt('<button type="button" class="IconButton svelte-1z0r1g6"><!></button>');!function(e){for(var t=0;t<e.length;t++)vt.add(e[t]);for(var n of pt)n(e);}(["click"]);var zt=St('<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false" class="svelte-1nzdrgw"><path d="M22 6v16h-16v-16h16zm2-2h-20v20h20v-20zm-24 17v-21h21v2h-19v19h-2zm18-8h-3v-3h-2v3h-3v2h3v3h2v-3h3v-2z"></path></svg>');function Rt(e){if(!e)return "";const t=document.createElement("textarea");return t.innerHTML=e,t.value}function It(e){return (e+"").padStart(2,"0")}function Ut(e){return e.replace(/:/g,"")}var Bt=bt('<div class="GrabIMBDDetails svelte-1oywuru"><!> <!></div>');!function(e){function t(){for(const t of e)qt(t.component,t.target,t.props,t.styles);}t(),new MutationObserver(t).observe(document.body,{childList:true,subtree:true});}([{component:function(e,t){D(t,true);let n=ae(0);var r=Bt(),i=Se(r);((function(e,t){var n=Lt();n.__click=function(...e){t.onclick?.apply(this,e);},function(e,t,...n){var r=new At(e);Ae(()=>{const e=t()??null;r.ensure(e,e&&(t=>e(t,...n)));},w);}(Se(n),()=>t.children??u),Ee(()=>{Pt(n,"title",t.title),Pt(n,"aria-label",t.title);}),kt(e,n);}))(i,{title:"Grab IMDB details",onclick:async function(){try{!function(e,t=1){var n=at(e);1===t?n++:n--,ce(e,n);}(n);const e=function(e){const{name:t="",originalName:n="",category:r="",rating:i="",runtime:s="",certification:o="",countries:l=[],languages:f=[],imdbLink:a="",description:c="",posters:u,createdAt:d="",genre:h=[],years:v,zettelId:p=""}=e||{},g=h.map(e=>"  - "+e).join("\n");return `---\nName: ${t}\nYear: ${v?.yearStart||""}\npg: ${o}\nSymbol:\nOriginal Name: ${n}\nCategory: ${r}\nLanguage: ${f[0]||""}\nCountry: ${l[0]||""}\nIMDB: ${i}\nRuntime: ${s}\nRotten:\nDetails: ${a}\ntags:\n${g}\nPoster: ${u?.normal||""}\nIn Watchlist: true\nWatched on:\nCreated at: ${d}\n---\n#watchList\n\n# ${t} (${v?.yearStart||""})\n\n![poster](${u?.small||""})\n\n${c}\n\n${p}\n`}(function(){const e=function(){const e=document.querySelector('[type="application/ld+json"]');if(!e)return {};try{return JSON.parse(e.innerHTML)}catch{return {}}}(),t=Rt(Ut(e.alternateName||e.name||"")),n=Rt(Ut(e.name||"")),r=function(e,t){if(t.includes("Documentary"))return "Documentary";const n=document.querySelector('[data-testid="interests"]')?.querySelectorAll("a");if(n)for(let r=0;r<n.length;r++)if("Anime"===n[r].textContent?.trim())return "Anime";return "TVSeries"===e?"TV Series":"Movie"}(e["@type"]||"",e.genre||[]),i=e.aggregateRating?.ratingValue?.toString(),s=e.contentRating,o=e.url||"",l=Rt(e.description),f={normal:e.image||"",small:e.image?e.image.replace(".jpg","_UX200_.jpg"):""},a=function(e){if(!e?.startsWith("PT"))return;const t=e.substring(2),n=t.match(/(\d+)H/),r=t.match(/(\d+)M/),i=[];return n&&i.push(n[1]+"h"),r&&i.push(r[1]+"m"),i.join(" ")}(e.duration),c=function(){const e=document.querySelector('[data-testid="title-details-origin"]')?.querySelectorAll("ul li");if(!e||!e.length)return ["US"];const t=[];return e.forEach(e=>{const n=e.textContent?.trim();n&&t.push("United States"===n?"US":"United Kingdom"===n?"UK":n);}),t.length?t:["US"]}(),u=function(){const e=document.querySelector('[data-testid="title-details-languages"]')?.querySelectorAll("ul li");if(!e||!e.length)return ["English"];const t=[];return e.forEach(e=>{const n=e.textContent?.trim();n&&t.push(n);}),t.length?t:["English"]}(),d=function(){const e=(document.title||"").match(/(\d{4})(?:[–-](\d{4})?)?/);return {yearStart:e?+e[1]:void 0,yearEnd:e?.[2]?+e[2]:void 0}}(),h=`${(v=new Date).getFullYear()}-${It(v.getMonth()+1)}-${It(v.getDate())}T${It(v.getHours())}:${It(v.getMinutes())}:${It(v.getSeconds())}`;var v;const p=function(e){const t=e=>(""+e).padStart(2,"0");return ""+e.getFullYear()+t(e.getMonth()+1)+t(e.getDate())+t(e.getHours())+t(e.getMinutes())}(new Date);return {name:t,originalName:n,category:r,rating:i,certification:s,genre:e.genre||[],years:d,runtime:a,imdbLink:o,countries:c,languages:u,description:l,posters:f,createdAt:h,zettelId:p}}());await async function(e){if("undefined"==typeof navigator||!navigator.clipboard)throw Error("copyToClipboard can only be used in the browser with clipboard support");try{await navigator.clipboard.writeText(e);}catch(t){throw console.error("Unable to copy text to clipboard.",t),t}}(e);}catch(e){console.log("debug:",e);}},children:(e,t)=>{!function(e){kt(e,zt());}(e);}}),function(e,t){D(t,true);const n=Tt(t,"trigger",0,0),r=Tt(t,"duration",0,2e3);let i=ae(false),s=null,o=false;!function(e){null===Ve&&(null===He&&function(){throw Error("https://svelte.dev/e/effect_orphan")}(),function(){throw Error("https://svelte.dev/e/effect_in_unowned_derived")}()),Ue&&function(){throw Error("https://svelte.dev/e/effect_in_teardown")}();var t=Ve.f;if(He||!(32&t)||0!==(t&b))return Me(e);var n=j;(n.e??=[]).push(e);}(()=>{if(n(),o)return ce(i,true),s&&clearTimeout(s),s=setTimeout(()=>{ce(i,false);},r()),()=>{s&&(clearTimeout(s),s=null);};o=true;});var l=Ct();let f;var a=Se(l);Ee(()=>{f=function(e,t,n,r,i,s){var o=e.__className;if(o!==n||void 0===o){var l=function(e,t,n){var r=""+e;if(n)for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,o=0;(o=r.indexOf(i,o))>=0;){var l=o+s;0!==o&&!Nt.includes(r[o-1])||l!==r.length&&!Nt.includes(r[l])?o=l:r=(0===o?"":r.substring(0,o))+r.substring(l+1);}return ""===r?null:r}(n,0,s);null==l?e.removeAttribute("class"):e.className=l,e.__className=n;}else if(s&&i!==s)for(var f in s){var a=!!s[f];null!=i&&a===!!i[f]||e.classList.toggle(f,a);}return s}(l,0,"ActionTooltip svelte-8g2rx8",0,f,{show:at(i)}),function(e,t){var n=null==t?"":"object"==typeof t?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"");}(a,t.description);}),kt(e,l),T();}(function(e,t=1){let n=e;for(;t--;)n=we(n);return n}(i,2),{description:"Copied!",get trigger(){return at(n)}}),kt(e,r),T();},target:document.querySelector('[data-testid="hero__pageTitle"]'),styles:{display:"inline-flex"}}]);

})();