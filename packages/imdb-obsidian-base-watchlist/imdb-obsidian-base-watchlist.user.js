// ==UserScript==
// @name         Imdb Obsidian Base Watchlist
// @namespace    https://github.com/siddacool/automation-scripts/tree/main/scripts/imdb-obsidian-base-watchlist
// @version      2.3.0
// @author       siddacool
// @description  Copy IMDB data to Markdown for Obsidian base
// @icon         https://www.google.com/s2/favicons?sz=64&domain=https://www.imdb.com/
// @downloadURL  https://raw.githubusercontent.com/siddacool/automation-scripts/gh-pages/packages/imdb-obsidian-base-watchlist/imdb-obsidian-base-watchlist.user.js
// @updateURL    https://raw.githubusercontent.com/siddacool/automation-scripts/gh-pages/packages/imdb-obsidian-base-watchlist/imdb-obsidian-base-watchlist.meta.js
// @match        https://www.imdb.com/title/*
// @grant        none
// ==/UserScript==

(function () {
	'use strict';

	const d$1=new Set;const t$1 = async e=>{d$1.has(e)||(d$1.add(e),(t=>{typeof GM_addStyle=="function"?GM_addStyle(t):(document.head||document.documentElement).appendChild(document.createElement("style")).append(t);})(e));};

	t$1(' @charset "UTF-8";.ActionTooltip.svelte-8g2rx8{position:absolute;top:40px;left:-7px;font-size:.8rem;width:55px;height:30px;background-color:#000;border-radius:4px;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .2s ease}.ActionTooltip.show.svelte-8g2rx8{opacity:1;pointer-events:auto}button.svelte-1z0r1g6{width:40px;height:40px;display:flex;background:transparent;border:0;align-items:center;justify-content:center;cursor:pointer;border-radius:50%;transition:all .1s;color:#fff;font-size:1.2rem;padding:0}button.svelte-1z0r1g6:focus-visible{outline:2px solid #f5c518;outline-offset:2px;background:#00000040}button.svelte-1z0r1g6:hover{color:#f5c518;background:#00000040}svg.svelte-1nzdrgw{position:relative;left:1px}.GrabIMBDDetails.svelte-1oywuru{position:relative;display:inline-flex;top:-3px} ');

	"undefined"!=typeof window&&((window.__svelte??={}).v??=new Set).add("5");const e=Symbol(),t="http://www.w3.org/1999/xhtml",n=false;var r=Array.isArray,i=Array.prototype.indexOf,o=Array.from,s=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyDescriptors,a=Object.prototype,c=Array.prototype,u=Object.getPrototypeOf,d=Object.isExtensible;const h=()=>{};function v(){var e,t;return {promise:new Promise((n,r)=>{e=n,t=r;}),resolve:e,reject:t}}const p=16,g=32,_=64,m=128,y=512,w=1024,b=2048,S=4096,k=8192,x=16384,$=32768,M=65536,E=1<<17,N=1<<18,A=1<<19,j=32768,O=1<<21,P=1<<23,q=Symbol("$state"),D=Symbol(""),T=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function C(e){return e===this.v}function L(e){return t=e,n=this.v,!(t!=t?n==n:t!==n||null!==t&&"object"==typeof t||"function"==typeof t);var t,n;}let z=false;let R=null;function I(e){R=e;}function U(e,t=false,n){R={p:R,i:false,c:null,e:null,s:e,x:null,l:z&&!t?{s:null,u:null,$:[]}:null};}function B(e){var t=R,n=t.e;if(null!==n)for(var r of(t.e=null,n))Re(r);return t.i=true,R=t.p,{}}function H(){return !z||null!==R&&null===R.l}let W=[];function F(e){if(0===W.length){var t=W;queueMicrotask(()=>{t===W&&function(){var e=W;W=[],function(e){for(var t=0;t<e.length;t++)e[t]();}(e);}();});}W.push(e);}function V(e){var t=ot;if(null===t)return nt.f|=P,e;if(0===(t.f&$)){if(0===(t.f&m))throw e;t.b.error(e);}else K(e,t);}function K(e,t){for(;null!==t;){if(0!==(t.f&m))try{return void t.b.error(e)}catch(n){e=n;}t=t.parent;}throw e}const Y=new Set;let G=null,J=null,X=[],Q=null,Z=false;class ee{committed=false;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#i=null;#o=new Set;#s=new Set;skipped_effects=new Set;is_fork=false;is_deferred(){return this.is_fork||this.#r>0}process(e){X=[],this.apply();var t={parent:null,effect:null,effects:[],render_effects:[]};for(const n of e)this.#l(n,t);this.is_fork||this.#f(),this.is_deferred()?(this.#a(t.effects),this.#a(t.render_effects)):(G=null,re(t.render_effects),re(t.effects),this.#i?.resolve()),J=null;}#l(e,t){e.f^=w;for(var n=e.first;null!==n;){var r=n.f,i=!!(96&r),o=i&&0!==(r&w)||0!==(r&k)||this.skipped_effects.has(n);if(0!==(n.f&m)&&n.b?.is_pending()&&(t={parent:t,effect:n,effects:[],render_effects:[]}),!o&&null!==n.fn){i?n.f^=w:4&r?t.effects.push(n):gt(n)&&(0!==(n.f&p)&&this.#o.add(n),bt(n));var s=n.first;if(null!==s){n=s;continue}}var l=n.parent;for(n=n.next;null===n&&null!==l;)l===t.effect&&(this.#a(t.effects),this.#a(t.render_effects),t=t.parent),n=l.next,l=l.parent;}}#a(e){for(const t of e)0!==(t.f&b)?this.#o.add(t):0!==(t.f&S)&&this.#s.add(t),this.#c(t.deps),Mt(t,w);}#c(e){if(null!==e)for(const t of e)2&t.f&&0!==(t.f&j)&&(t.f^=j,this.#c(t.deps));}capture(e,t){this.previous.has(e)||this.previous.set(e,t),0===(e.f&P)&&(this.current.set(e,e.v),J?.set(e,e.v));}activate(){G=this,this.apply();}deactivate(){G===this&&(G=null,J=null);}flush(){if(this.activate(),X.length>0){if(function(){var e=Qe;Z=true;try{var t=0;for(Ze(!0);X.length>0;){var r=ee.ensure();if(t++>1e3)n,te();r.process(X),me.clear();}}finally{Z=false,Ze(e),Q=null;}}(),null!==G&&G!==this)return}else 0===this.#n&&this.process([]);this.deactivate();}discard(){for(const e of this.#t)e(this);this.#t.clear();}#f(){if(0===this.#r){for(const e of this.#e)e();this.#e.clear();}0===this.#n&&this.#u();}#u(){if(Y.size>1){this.previous.clear();var e=J,t=true,n={parent:null,effect:null,effects:[],render_effects:[]};for(const e of Y){if(e===this){t=false;continue}const i=[];for(const[n,r]of this.current){if(e.current.has(n)){if(!t||r===e.current.get(n))continue;e.current.set(n,r);}i.push(n);}if(0===i.length)continue;const o=[...e.current.keys()].filter(e=>!this.current.has(e));if(o.length>0){var r=X;X=[];const t=new Set,s=new Map;for(const e of i)ie(e,o,t,s);if(X.length>0){G=e,e.apply();for(const t of X)e.#l(t,n);e.deactivate();}X=r;}}G=null,J=e;}this.committed=true,Y.delete(this);}increment(e){this.#n+=1,e&&(this.#r+=1);}decrement(e){this.#n-=1,e&&(this.#r-=1),this.revive();}revive(){for(const e of this.#o)this.#s.delete(e),Mt(e,b),se(e);for(const e of this.#s)Mt(e,S),se(e);this.flush();}oncommit(e){this.#e.add(e);}ondiscard(e){this.#t.add(e);}settled(){return (this.#i??=v()).promise}static ensure(){if(null===G){const e=G=new ee;Y.add(G),ee.enqueue(()=>{G===e&&e.flush();});}return G}static enqueue(e){F(e);}apply(){}}function te(){try{!function(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}();}catch(e){K(e,Q);}}let ne=null;function re(e){var t=e.length;if(0!==t){for(var n=0;n<t;){var r=e[n++];if(!(24576&r.f)&&gt(r)&&(ne=new Set,bt(r),null===r.deps&&null===r.first&&null===r.nodes&&(null===r.teardown&&null===r.ac?Ve(r):r.fn=null),ne?.size>0)){me.clear();for(const e of ne){if(24576&e.f)continue;const t=[e];let n=e.parent;for(;null!==n;)ne.has(n)&&(ne.delete(n),t.push(n)),n=n.parent;for(let e=t.length-1;e>=0;e--){const n=t[e];24576&n.f||bt(n);}}ne.clear();}}ne=null;}}function ie(e,t,n,r){if(!n.has(e)&&(n.add(e),null!==e.reactions))for(const i of e.reactions){const e=i.f;2&e?ie(i,t,n,r):4194320&e&&0===(e&b)&&oe(i,t,r)&&(Mt(i,b),se(i));}}function oe(e,t,n){const r=n.get(e);if(void 0!==r)return r;if(null!==e.deps)for(const i of e.deps){if(t.includes(i))return  true;if(2&i.f&&oe(i,t,n))return n.set(i,true),true}return n.set(e,false),false}function se(e){for(var t=Q=e;null!==t.parent;){var n=(t=t.parent).f;if(Z&&t===ot&&0!==(n&p)&&0===(n&N))return;if(96&n){if(0===(n&w))return;t.f^=w;}}X.push(t);}function le(e){let t,n=0,r=we(0);return ()=>{ze()&&(St(r),function(e,t=0){Le(8|t,e,true);}(()=>(0===n&&(t=function(e){var t=rt;try{return rt=!0,e()}finally{rt=t;}}(()=>e(()=>xe(r)))),n+=1,()=>{F(()=>{n-=1,0===n&&(t?.(),t=void 0,xe(r));});})));}}class fe{parent;#n=false;#d;#h=null;#v;#p;#g;#_=null;#m=null;#y=null;#w=null;#b=null;#S=0;#k=0;#x=false;#$=null;#M=le(()=>(this.#$=we(this.#S),()=>{this.#$=null;}));constructor(e,t,n){this.#d=e,this.#v=t,this.#p=n,this.parent=ot.b,this.#n=!!this.#v.pending,this.#g=Ue(()=>{ot.b=this;var e=this.#E();try{this.#_=Be(()=>n(e));}catch(t){this.error(t);}return this.#k>0?this.#N():this.#n=false,()=>{this.#b?.remove();}},589952);}#A(){try{this.#_=Be(()=>this.#p(this.#d));}catch(e){this.error(e);}this.#n=false;}#j(){const e=this.#v.pending;e&&(this.#m=Be(()=>e(this.#d)),ee.enqueue(()=>{var e=this.#E();this.#_=this.#O(()=>(ee.ensure(),Be(()=>this.#p(e)))),this.#k>0?this.#N():(Ke(this.#m,()=>{this.#m=null;}),this.#n=false);}));}#E(){var e=this.#d;return this.#n&&(this.#b=Oe(),this.#d.before(this.#b),e=this.#b),e}is_pending(){return this.#n||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return !!this.#v.pending}#O(e){var t=ot,n=nt,r=R;st(this.#g),it(this.#g),I(this.#g.ctx);try{return e()}catch(i){return V(i),null}finally{st(t),it(n),I(r);}}#N(){const e=this.#v.pending;null!==this.#_&&(this.#w=document.createDocumentFragment(),this.#w.append(this.#b),Xe(this.#_,this.#w)),null===this.#m&&(this.#m=Be(()=>e(this.#d)));}#P(e){this.has_pending_snippet()?(this.#k+=e,0===this.#k&&(this.#n=false,this.#m&&Ke(this.#m,()=>{this.#m=null;}),this.#w&&(this.#d.before(this.#w),this.#w=null))):this.parent&&this.parent.#P(e);}update_pending_count(e){this.#P(e),this.#S+=e,this.#$&&ke(this.#$,this.#S);}get_effect_pending(){return this.#M(),St(this.#$)}error(e){var t=this.#v.onerror;let n=this.#v.failed;if(this.#x||!t&&!n)throw e;this.#_&&(Fe(this.#_),this.#_=null),this.#m&&(Fe(this.#m),this.#m=null),this.#y&&(Fe(this.#y),this.#y=null);var r=false,i=false;const o=()=>{r?console.warn("https://svelte.dev/e/svelte_boundary_reset_noop"):(r=true,i&&function(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}(),ee.ensure(),this.#S=0,null!==this.#y&&Ke(this.#y,()=>{this.#y=null;}),this.#n=this.has_pending_snippet(),this.#_=this.#O(()=>(this.#x=false,Be(()=>this.#p(this.#d)))),this.#k>0?this.#N():this.#n=false);};var s=nt;try{it(null),i=!0,t?.(e,o),i=!1;}catch(l){K(l,this.#g&&this.#g.parent);}finally{it(s);}n&&F(()=>{this.#y=this.#O(()=>{ee.ensure(),this.#x=true;try{return Be(()=>{n(this.#d,()=>e,()=>o);})}catch(l){return K(l,this.#g.parent),null}finally{this.#x=false;}});});}}function ae(e,t,n,r){const i=H()?ue:he;if(0!==n.length||0!==e.length){var o,s,l,f,a=G,c=ot,u=(o=ot,s=nt,l=R,f=G,function(e=true){st(o),it(s),I(l),e&&f?.activate();});e.length>0?Promise.all(e).then(()=>{u();try{return d()}finally{a?.deactivate(),ce();}}):d();}else r(t.map(i));function d(){Promise.all(n.map(e=>de(e))).then(e=>{u();try{r([...t.map(i),...e]);}catch(n){0===(c.f&x)&&K(n,c);}a?.deactivate(),ce();}).catch(e=>{K(e,c);});}}function ce(){st(null),it(null),I(null);}function ue(t){var n=null!==nt&&2&nt.f?nt:null;null!==ot&&(ot.f|=A);return {ctx:R,deps:null,effects:null,equals:C,f:2050,fn:t,reactions:null,rv:0,v:e,wv:0,parent:n??ot,ac:null}}function de(t,n){let r=ot;null===r&&function(){throw new Error("https://svelte.dev/e/async_derived_orphan")}();var i=r.b,o=void 0,s=we(e),l=!nt,f=new Map;return function(e){Le(4718592,e,true);}(()=>{var e=v();o=e.promise;try{Promise.resolve(t()).then(e.resolve,e.reject).then(()=>{n===G&&n.committed&&n.deactivate(),ce();});}catch(c){e.reject(c),ce();}var n=G;if(l){var r=!i.is_pending();i.update_pending_count(1),n.increment(r),f.get(n)?.reject(T),f.delete(n),f.set(n,e);}const a=(e,t=void 0)=>{if(n.activate(),t)t!==T&&(s.f|=P,ke(s,t));else {0!==(s.f&P)&&(s.f^=P),ke(s,e);for(const[e,t]of f){if(f.delete(e),e===n)break;t.reject(T);}}l&&(i.update_pending_count(-1),n.decrement(r));};e.promise.then(a,e=>a(null,e||"unknown"));}),function(e){const t=Le(8,null,false);Mt(t,w),t.teardown=e;}(()=>{for(const e of f.values())e.reject(T);}),new Promise(e=>{!function t(n){function r(){n===o?e(s):t(o);}n.then(r,r);}(o);})}function he(e){const t=ue(e);return t.equals=L,t}function ve(e){var t=e.effects;if(null!==t){e.effects=null;for(var n=0;n<t.length;n+=1)Fe(t[n]);}}function pe(e){var t,n=ot;st(function(e){for(var t=e.parent;null!==t;){if(!(2&t.f))return 0===(t.f&x)?t:null;t=t.parent;}return null}(e));try{e.f&=-32769,ve(e),t=mt(e);}finally{st(n);}return t}function ge(e){var t=pe(e);(e.equals(t)||(G?.is_fork||(e.v=t),e.wv=pt()),et)||(null!==J?(ze()||G?.is_fork)&&J.set(e,t):Mt(e,0===(e.f&y)?S:w));}let _e=new Set;const me=new Map;let ye=false;function we(e,t){return {f:0,v:e,reactions:null,equals:C,rv:0,wv:0}}function be(e,t){const n=we(e);var r;return r=n,null!==nt&&(null===lt?lt=[r]:lt.push(r)),n}function Se(e,t,n=false){return null!==nt&&(!rt||0!==(nt.f&E))&&H()&&4325394&nt.f&&!lt?.includes(e)&&function(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}(),ke(e,n?Me(t):t)}function ke(e,t){if(!e.equals(t)){var n=e.v;et?me.set(e,t):me.set(e,n),e.v=t;var r=ee.ensure();r.capture(e,n),2&e.f&&(0!==(e.f&b)&&pe(e),Mt(e,0!==(e.f&y)?w:S)),e.wv=pt(),$e(e,b),!H()||null===ot||0===(ot.f&w)||96&ot.f||(null===ct?function(e){ct=e;}([e]):ct.push(e)),!r.is_fork&&_e.size>0&&!ye&&function(){ye=false;var e=Qe;Ze(true);const t=Array.from(_e);try{for(const e of t)0!==(e.f&w)&&Mt(e,S),gt(e)&&bt(e);}finally{Ze(e);}_e.clear();}();}return t}function xe(e){Se(e,e.v+1);}function $e(e,t){var n=e.reactions;if(null!==n)for(var r=H(),i=n.length,o=0;o<i;o++){var s=n[o],l=s.f;if(r||s!==ot){var f=0===(l&b);if(f&&Mt(s,t),2&l){var a=s;J?.delete(a),0===(l&j)&&(l&y&&(s.f|=j),$e(a,S));}else f&&(0!==(l&p)&&null!==ne&&ne.add(s),se(s));}}}function Me(t){if("object"!=typeof t||null===t||q in t)return t;const n=u(t);if(n!==a&&n!==c)return t;var i=new Map,o=r(t),s=be(0),f=ht,d=e=>{if(ht===f)return e();var t=nt,n=ht;it(null),vt(f);var r=e();return it(t),vt(n),r};return o&&i.set("length",be(t.length)),new Proxy(t,{defineProperty(e,t,n){"value"in n&&false!==n.configurable&&false!==n.enumerable&&false!==n.writable||function(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}();var r=i.get(t);return void 0===r?r=d(()=>{var e=be(n.value);return i.set(t,e),e}):Se(r,n.value,true),true},deleteProperty(t,n){var r=i.get(n);if(void 0===r){if(n in t){const t=d(()=>be(e));i.set(n,t),xe(s);}}else Se(r,e),xe(s);return  true},get(n,r,o){if(r===q)return t;var s=i.get(r),f=r in n;if(void 0!==s||f&&!l(n,r)?.writable||(s=d(()=>be(Me(f?n[r]:e))),i.set(r,s)),void 0!==s){var a=St(s);return a===e?void 0:a}return Reflect.get(n,r,o)},getOwnPropertyDescriptor(t,n){var r=Reflect.getOwnPropertyDescriptor(t,n);if(r&&"value"in r){var o=i.get(n);o&&(r.value=St(o));}else if(void 0===r){var s=i.get(n),l=s?.v;if(void 0!==s&&l!==e)return {enumerable:true,configurable:true,value:l,writable:true}}return r},has(t,n){if(n===q)return  true;var r=i.get(n),o=void 0!==r&&r.v!==e||Reflect.has(t,n);if((void 0!==r||null!==ot&&(!o||l(t,n)?.writable))&&(void 0===r&&(r=d(()=>be(o?Me(t[n]):e)),i.set(n,r)),St(r)===e))return  false;return o},set(t,n,r,f){var a=i.get(n),c=n in t;if(o&&"length"===n)for(var u=r;u<a.v;u+=1){var h=i.get(u+"");void 0!==h?Se(h,e):u in t&&(h=d(()=>be(e)),i.set(u+"",h));} void 0===a?c&&!l(t,n)?.writable||(Se(a=d(()=>be(void 0)),Me(r)),i.set(n,a)):(c=a.v!==e,Se(a,d(()=>Me(r))));var v=Reflect.getOwnPropertyDescriptor(t,n);if(v?.set&&v.set.call(f,r),!c){if(o&&"string"==typeof n){var p=i.get("length"),g=Number(n);Number.isInteger(g)&&g>=p.v&&Se(p,g+1);}xe(s);}return  true},ownKeys(t){St(s);var n=Reflect.ownKeys(t).filter(t=>{var n=i.get(t);return void 0===n||n.v!==e});for(var[r,o]of i)o.v===e||r in t||n.push(r);return n},setPrototypeOf(){!function(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}();}})}var Ee,Ne,Ae,je;function Oe(e=""){return document.createTextNode(e)}function Pe(e){return Ae.call(e)}function qe(e){return je.call(e)}function De(e,t){return Pe(e)}function Te(e){var t=nt,n=ot;it(null),st(null);try{return e()}finally{it(t),st(n);}}function Ce(e){null===ot&&(null===nt&&function(){throw new Error("https://svelte.dev/e/effect_orphan")}(),function(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}()),et&&function(){throw new Error("https://svelte.dev/e/effect_in_teardown")}();}function Le(e,t,n){var r=ot;null!==r&&0!==(r.f&k)&&(e|=k);var i={ctx:R,deps:null,nodes:null,f:e|b|y,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{bt(i),i.f|=$;}catch(l){throw Fe(i),l}else null!==t&&se(i);var o=i;if(n&&null===o.deps&&null===o.teardown&&null===o.nodes&&o.first===o.last&&0===(o.f&A)&&(o=o.first,0!==(e&p)&&0!==(e&M)&&null!==o&&(o.f|=M)),null!==o&&(o.parent=r,null!==r&&function(e,t){var n=t.last;null===n?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e);}(o,r),null!==nt&&2&nt.f&&0===(e&_))){var s=nt;(s.effects??=[]).push(o);}return i}function ze(){return null!==nt&&!rt}function Re(e){return Le(1048580,e,false)}function Ie(e,t=[],n=[],r=[]){ae(r,t,n,t=>{Le(8,()=>e(...t.map(St)),!0);});}function Ue(e,t=0){return Le(p|t,e,true)}function Be(e){return Le(524320,e,true)}function He(e){var t=e.teardown;if(null!==t){const e=et,n=nt;tt(true),it(null);try{t.call(null);}finally{tt(e),it(n);}}}function We(e,t=false){var n=e.first;for(e.first=e.last=null;null!==n;){const e=n.ac;null!==e&&Te(()=>{e.abort(T);});var r=n.next;0!==(n.f&_)?n.parent=null:Fe(n,t),n=r;}}function Fe(e,t=true){var n=false;!t&&0===(e.f&N)||null===e.nodes||null===e.nodes.end||(!function(e,t){for(;null!==e;){var n=e===t?null:qe(e);e.remove(),e=n;}}(e.nodes.start,e.nodes.end),n=true),We(e,t&&!n),wt(e,0),Mt(e,x);var r=e.nodes&&e.nodes.t;if(null!==r)for(const o of r)o.stop();He(e);var i=e.parent;null!==i&&null!==i.first&&Ve(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null;}function Ve(e){var t=e.parent,n=e.prev,r=e.next;null!==n&&(n.next=r),null!==r&&(r.prev=n),null!==t&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n));}function Ke(e,t,n=true){var r=[];Ye(e,r,true);var i=()=>{n&&Fe(e),t&&t();},o=r.length;if(o>0){var s=()=>--o||i();for(var l of r)l.out(s);}else i();}function Ye(e,t,n){if(0===(e.f&k)){e.f^=k;var r=e.nodes&&e.nodes.t;if(null!==r)for(const e of r)(e.is_global||n)&&t.push(e);for(var i=e.first;null!==i;){var o=i.next;Ye(i,t,!!(0!==(i.f&M)||0!==(i.f&g)&&0!==(e.f&p))&&n),i=o;}}}function Ge(e){Je(e,true);}function Je(e,t){if(0!==(e.f&k)){e.f^=k,0===(e.f&w)&&(Mt(e,b),se(e));for(var n=e.first;null!==n;){var r=n.next;Je(n,!!(0!==(n.f&M)||0!==(n.f&g))&&t),n=r;}var i=e.nodes&&e.nodes.t;if(null!==i)for(const e of i)(e.is_global||t)&&e.in();}}function Xe(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;null!==n;){var i=n===r?null:qe(n);t.append(n),n=i;}}let Qe=false;function Ze(e){Qe=e;}let et=false;function tt(e){et=e;}let nt=null,rt=false;function it(e){nt=e;}let ot=null;function st(e){ot=e;}let lt=null;let ft=null,at=0,ct=null;let ut=1,dt=0,ht=dt;function vt(e){ht=e;}function pt(){return ++ut}function gt(e){var t=e.f;if(0!==(t&b))return  true;if(2&t&&(e.f&=-32769),0!==(t&S)){var n=e.deps;if(null!==n)for(var r=n.length,i=0;i<r;i++){var o=n[i];if(gt(o)&&ge(o),o.wv>e.wv)return  true}0!==(t&y)&&null===J&&Mt(e,w);}return  false}function _t(e,t,n=true){var r=e.reactions;if(null!==r&&!lt?.includes(e))for(var i=0;i<r.length;i++){var o=r[i];2&o.f?_t(o,t,false):t===o&&(n?Mt(o,b):0!==(o.f&w)&&Mt(o,S),se(o));}}function mt(e){var t=ft,n=at,r=ct,i=nt,o=lt,s=R,l=rt,f=ht,a=e.f;ft=null,at=0,ct=null,nt=96&a?null:e,lt=null,I(e.ctx),rt=false,ht=++dt,null!==e.ac&&(Te(()=>{e.ac.abort(T);}),e.ac=null);try{e.f|=O;var c=(0,e.fn)(),u=e.deps;if(null!==ft){var d;if(wt(e,at),null!==u&&at>0)for(u.length=at+ft.length,d=0;d<ft.length;d++)u[at+d]=ft[d];else e.deps=u=ft;if(ze()&&0!==(e.f&y))for(d=at;d<u.length;d++)(u[d].reactions??=[]).push(e);}else null!==u&&at<u.length&&(wt(e,at),u.length=at);if(H()&&null!==ct&&!rt&&null!==u&&!(6146&e.f))for(d=0;d<ct.length;d++)_t(ct[d],e);return null!==i&&i!==e&&(dt++,null!==ct&&(null===r?r=ct:r.push(...ct))),0!==(e.f&P)&&(e.f^=P),c}catch(h){return V(h)}finally{e.f^=O,ft=t,at=n,ct=r,nt=i,lt=o,I(s),rt=l,ht=f;}}function yt(e,t){let n=t.reactions;if(null!==n){var r=i.call(n,e);if(-1!==r){var o=n.length-1;0===o?n=t.reactions=null:(n[r]=n[o],n.pop());}}null===n&&2&t.f&&(null===ft||!ft.includes(t))&&(Mt(t,S),0!==(t.f&y)&&(t.f^=y,t.f&=-32769),ve(t),wt(t,0));}function wt(e,t){var n=e.deps;if(null!==n)for(var r=t;r<n.length;r++)yt(e,n[r]);}function bt(e){var t=e.f;if(0===(t&x)){Mt(e,w);var n=ot,r=Qe;ot=e,Qe=true;try{16777232&t?function(e){for(var t=e.first;null!==t;){var n=t.next;0===(t.f&g)&&Fe(t),t=n;}}(e):We(e),He(e);var i=mt(e);e.teardown="function"==typeof i?i:null,e.wv=ut;}finally{Qe=r,ot=n;}}}function St(e){var t=!!(2&e.f);if(null!==nt&&!rt&&(!(null!==ot&&0!==(ot.f&x))&&!lt?.includes(e))){var n=nt.deps;if(0!==(nt.f&O))e.rv<dt&&(e.rv=dt,null===ft&&null!==n&&n[at]===e?at++:null===ft?ft=[e]:ft.includes(e)||ft.push(e));else {(nt.deps??=[]).push(e);var r=e.reactions;null===r?e.reactions=[nt]:r.includes(nt)||r.push(nt);}}if(et){if(me.has(e))return me.get(e);if(t){var i=e,o=i.v;return (0===(i.f&w)&&null!==i.reactions||xt(i))&&(o=pe(i)),me.set(i,o),o}}else t&&(!J?.has(e)||G?.is_fork&&!ze())&&(gt(i=e)&&ge(i),Qe&&ze()&&0===(i.f&y)&&kt(i));if(J?.has(e))return J.get(e);if(0!==(e.f&P))throw e.v;return e.v}function kt(e){if(null!==e.deps){e.f^=y;for(const t of e.deps)(t.reactions??=[]).push(e),2&t.f&&0===(t.f&y)&&kt(t);}}function xt(t){if(t.v===e)return  true;if(null===t.deps)return  false;for(const e of t.deps){if(me.has(e))return  true;if(2&e.f&&xt(e))return  true}return  false}const $t=-7169;function Mt(e,t){e.f=e.f&$t|t;}const Et=new Set,Nt=new Set;let At=null;function jt(e){var t=this,n=t.ownerDocument,r=e.type,i=e.composedPath?.()||[],o=i[0]||e.target;At=e;var l=0,f=At===e&&e.__root;if(f){var a=i.indexOf(f);if(-1!==a&&(t===document||t===window))return void(e.__root=t);var c=i.indexOf(t);if(-1===c)return;a<=c&&(l=a);}if((o=i[l]||e.target)!==t){s(e,"currentTarget",{configurable:true,get:()=>o||n});var u=nt,d=ot;it(null),st(null);try{for(var h,v=[];null!==o;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var g=o["__"+r];null==g||o.disabled&&e.target!==o||g.call(o,e);}catch(_){h?v.push(_):h=_;}if(e.cancelBubble||p===t||null===p)break;o=p;}if(h){for(let e of v)queueMicrotask(()=>{throw e});throw h}}finally{e.__root=t,delete e.currentTarget,it(u),st(d);}}}function Ot(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","\x3c!----\x3e"),t.content}function Pt(e,t){var n=ot;null===n.nodes&&(n.nodes={start:e,end:t,a:null,t:null});}function qt(e,t){var n,i=!e.startsWith("<!>");return ()=>{ void 0===n&&(n=Pe(n=Ot(i?e:"<!>"+e)));var t=Ne?document.importNode(n,true):n.cloneNode(true);return Pt(t,t),t}}function Dt(e,t,n="svg"){var r,i=`<${n}>${!e.startsWith("<!>")?e:"<!>"+e}</${n}>`;return ()=>{if(!r){var e=Ot(i);r=Pe(Pe(e));}var t=r.cloneNode(true);return Pt(t,t),t}}function Tt(e,t){return Dt(e,0,"svg")}function Ct(e,t){null!==e&&e.before(t);}const Lt=["touchstart","touchmove"];function zt(e){return Lt.includes(e)}function Rt(e,t){return function(e,{target:t,anchor:n,props:r={},events:i,context:s,intro:f=true}){!function(){if(void 0===Ee){Ee=window,Ne=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Ae=l(t,"firstChild").get,je=l(t,"nextSibling").get,d(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),d(n)&&(n.__t=void 0);}}();var a=new Set,c=e=>{for(var n=0;n<e.length;n++){var r=e[n];if(!a.has(r)){a.add(r);var i=zt(r);t.addEventListener(r,jt,{passive:i});var o=It.get(r);void 0===o?(document.addEventListener(r,jt,{passive:i}),It.set(r,1)):It.set(r,o+1);}}};c(o(Et)),Nt.add(c);var u=void 0,h=function(e){ee.ensure();const t=Le(524352,e,true);return (e={})=>new Promise(n=>{e.outro?Ke(t,()=>{Fe(t),n(void 0);}):(Fe(t),n(void 0));})}(()=>{var o=n??t.appendChild(Oe());return function(e,t,n){new fe(e,t,n);}(o,{pending:()=>{}},t=>{s&&(U({}),R.c=s);i&&(r.$$events=i),u=e(t,r)||{},s&&B();}),()=>{for(var e of a){t.removeEventListener(e,jt);var r=It.get(e);0===--r?(document.removeEventListener(e,jt),It.delete(e)):It.set(e,r);}Nt.delete(c),o!==n&&o.parentNode?.removeChild(o);}});return Ut.set(u,h),u}(e,t)}const It=new Map;let Ut=new WeakMap;class Bt{anchor;#q=new Map;#D=new Map;#T=new Map;#C=new Set;#L=true;constructor(e,t=true){this.anchor=e,this.#L=t;}#u=()=>{var e=G;if(this.#q.has(e)){var t=this.#q.get(e),n=this.#D.get(t);if(n)Ge(n),this.#C.delete(t);else {var r=this.#T.get(t);r&&(this.#D.set(t,r.effect),this.#T.delete(t),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),n=r.effect);}for(const[t,n]of this.#q){if(this.#q.delete(t),t===e)break;const r=this.#T.get(n);r&&(Fe(r.effect),this.#T.delete(n));}for(const[e,r]of this.#D){if(e===t||this.#C.has(e))continue;const i=()=>{if(Array.from(this.#q.values()).includes(e)){var t=document.createDocumentFragment();Xe(r,t),t.append(Oe()),this.#T.set(e,{effect:r,fragment:t});}else Fe(r);this.#C.delete(e),this.#D.delete(e);};this.#L||!n?(this.#C.add(e),Ke(r,i,false)):i();}}};#z=e=>{this.#q.delete(e);const t=Array.from(this.#q.values());for(const[n,r]of this.#T)t.includes(n)||(Fe(r.effect),this.#T.delete(n));};ensure(e,t){var n=G;!t||this.#D.has(e)||this.#T.has(e)||this.#D.set(e,Be(()=>t(this.anchor)));this.#q.set(n,e),this.#u();}}const Ht=[..." \t\n\r\f \v\ufeff"];function Wt(e,t,n,r,i,o){var s=e.__className;if(s!==n||void 0===s){var l=function(e,t,n){var r=""+e;if(n)for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,s=0;(s=r.indexOf(i,s))>=0;){var l=s+o;0!==s&&!Ht.includes(r[s-1])||l!==r.length&&!Ht.includes(r[l])?s=l:r=(0===s?"":r.substring(0,s))+r.substring(l+1);}return ""===r?null:r}(n,0,o);null==l?e.removeAttribute("class"):e.className=l,e.__className=n;}else if(o&&i!==o)for(var f in o){var a=!!o[f];null!=i&&a===!!i[f]||e.classList.toggle(f,a);}return o}const Ft=Symbol("is custom element"),Vt=Symbol("is html");function Kt(e,n,r,i){var o=function(e){return e.__attributes??={[Ft]:e.nodeName.includes("-"),[Vt]:e.namespaceURI===t}}(e);o[n]!==(o[n]=r)&&("loading"===n&&(e[D]=r),null==r?e.removeAttribute(n):"string"!=typeof r&&function(e){var t,n=e.getAttribute("is")||e.nodeName,r=Yt.get(n);if(r)return r;Yt.set(n,r=[]);var i=e,o=Element.prototype;for(;o!==i;){for(var s in t=f(i))t[s].set&&r.push(s);i=u(i);}return r}(e).includes(n)?e[n]=r:e.setAttribute(n,r));}var Yt=new Map;function Gt(e,t,n,r){var i=r,o=true,s=()=>(o&&(o=false,i=r),i);return void 0===e[t]&&void 0!==r&&s(),()=>{var n=e[t];return void 0===n?s():(o=true,n)}}function Jt(e,t,n,r){if(!t)return;const i=`svc-${e.name||"component"}`;if(t.querySelector(`.${i}`))return;const o=document.createElement("div");o.className=i,r&&Object.assign(o.style,r),t.append(o),Rt(e,{target:o,props:n});}var Xt=qt("<span> </span>");function Qt(e,t){U(t,true);const n=Gt(t,"trigger",0,0),r=Gt(t,"duration",0,2e3);let i=be(false),o=null,s=false;!function(e){Ce();var t=ot.f;if(nt||0===(t&g)||0!==(t&$))return Re(e);var n=R;(n.e??=[]).push(e);}(()=>{if(n(),s)return Se(i,true),o&&clearTimeout(o),o=setTimeout(()=>{Se(i,false);},r()),()=>{o&&(clearTimeout(o),o=null);};s=true;});var l=Xt();let f;var a=De(l);Ie(()=>{f=Wt(l,0,"ActionTooltip svelte-8g2rx8",0,f,{show:St(i)}),function(e,t){var n=null==t?"":"object"==typeof t?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"");}(a,t.description);}),Ct(e,l),B();}var Zt=qt('<button type="button" class="IconButton svelte-1z0r1g6"><!></button>');function en(e,t){var n=Zt();n.__click=function(...e){t.onclick?.apply(this,e);},function(e,t,...n){var r=new Bt(e);Ue(()=>{const e=t()??null;r.ensure(e,e&&(t=>e(t,...n)));},M);}(De(n),()=>t.children??h),Ie(()=>{Kt(n,"title",t.title),Kt(n,"aria-label",t.title);}),Ct(e,n);}!function(e){for(var t=0;t<e.length;t++)Et.add(e[t]);for(var n of Nt)n(e);}(["click"]),z=true;var tn=Tt('<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false" class="svelte-1nzdrgw"><path d="M22 6v16h-16v-16h16zm2-2h-20v20h20v-20zm-24 17v-21h21v2h-19v19h-2zm18-8h-3v-3h-2v3h-3v2h3v3h2v-3h3v-2z"></path></svg>');function nn(e){if(!e)return "";const t=document.createElement("textarea");return t.innerHTML=e,t.value}function rn(e){return String(e).padStart(2,"0")}function on(e){return e.replace(/:/g,"")}function sn(){const e=function(){const e=document.querySelector('[type="application/ld+json"]');if(!e)return {};try{return JSON.parse(e.innerHTML)}catch{return {}}}(),t=nn(on(e.alternateName||e.name||"")),n=nn(on(e.name||"")),r=function(e,t){if(t.includes("Documentary"))return "Documentary";const n=document.querySelector('[data-testid="interests"]')?.querySelectorAll("a");if(n)for(let r=0;r<n.length;r++)if("Anime"===n[r].textContent?.trim())return "Anime";return "TVSeries"===e?"TV Series":"Movie"}(e["@type"]||"",e.genre||[]),i=e.aggregateRating?.ratingValue?.toString(),o=e.contentRating,s=e.url||"",l=nn(e.description),f={normal:e.image||"",small:e.image?e.image.replace(".jpg","_UX200_.jpg"):""},a=function(e){if(!e?.startsWith("PT"))return;const t=e.substring(2),n=t.match(/(\d+)H/),r=t.match(/(\d+)M/),i=[];return n&&i.push(`${n[1]}h`),r&&i.push(`${r[1]}m`),i.join(" ")}(e.duration),c=function(){const e=document.querySelector('[data-testid="title-details-origin"]')?.querySelectorAll("ul li");if(!e||!e.length)return ["US"];const t=[];return e.forEach(e=>{const n=e.textContent?.trim();n&&("United States"===n?t.push("US"):"United Kingdom"===n?t.push("UK"):t.push(n));}),t.length?t:["US"]}(),u=function(){const e=document.querySelector('[data-testid="title-details-languages"]')?.querySelectorAll("ul li");if(!e||!e.length)return ["English"];const t=[];return e.forEach(e=>{const n=e.textContent?.trim();n&&t.push(n);}),t.length?t:["English"]}(),d=function(e){const t=e.match(/(\d{4})(?:[–-](\d{4})?)?/);return {yearStart:t?Number(t[1]):void 0,yearEnd:t?.[2]?Number(t[2]):void 0}}(document.title||""),h=`${(v=new Date).getFullYear()}-${rn(v.getMonth()+1)}-${rn(v.getDate())}T${rn(v.getHours())}:${rn(v.getMinutes())}:${rn(v.getSeconds())}`;var v;const p=function(e){const t=e=>e.toString().padStart(2,"0");return e.getFullYear().toString()+t(e.getMonth()+1)+t(e.getDate())+t(e.getHours())+t(e.getMinutes())}(new Date);return {name:t,originalName:n,category:r,rating:i,certification:o,genre:e.genre||[],years:d,runtime:a,imdbLink:s,countries:c,languages:u,description:l,posters:f,createdAt:h,zettelId:p}}var ln=qt('<div class="GrabIMBDDetails svelte-1oywuru"><!> <!></div>');!function(e){function t(){for(const t of e)Jt(t.component,t.target,t.props,t.styles);}t();const n=new MutationObserver(t);n.observe(document.body,{childList:true,subtree:true});}([{component:function(e,t){U(t,true);let n=be(0);var r=ln(),i=De(r);en(i,{title:"Grab IMDB details",onclick:async function(){try{!function(e,t=1){var n=St(e),r=1===t?n++:n--;Se(e,n);}(n);const e=function(e){const{name:t="",originalName:n="",category:r="",rating:i="",runtime:o="",certification:s="",countries:l=[],languages:f=[],imdbLink:a="",description:c="",posters:u,createdAt:d="",genre:h=[],years:v,zettelId:p=""}=e||{},g=h.map(e=>`  - ${e}`).join("\n");return `---\nName: ${t}\nYear: ${v?.yearStart||""}\npg: ${s}\nSymbol:\nOriginal Name: ${n}\nCategory: ${r}\nLanguage: ${f[0]||""}\nCountry: ${l[0]||""}\nIMDB: ${i}\nRuntime: ${o}\nRotten:\nDetails: ${a}\ntags:\n${g}\nPoster: ${u?.normal||""}\nIn Watchlist: true\nWatched on:\nCreated at: ${d}\n---\n#watchList\n\n# ${t} (${v?.yearStart||""})\n\n![poster](${u?.small||""})\n\n${c}\n\n${p}\n`}(sn());await async function(e){if("undefined"==typeof navigator||!navigator.clipboard)throw new Error("copyToClipboard can only be used in the browser with clipboard support");try{await navigator.clipboard.writeText(e);}catch(t){throw console.error("Unable to copy text to clipboard.",t),t}}(e);}catch(e){console.log("debug:",e);}},children:(e,t)=>{!function(e){Ct(e,tn());}(e);}}),Qt(function(e,t=1){let n=e;for(;t--;)n=qe(n);return n}(i,2),{description:"Copied!",get trigger(){return St(n)}}),Ct(e,r),B();},target:document.querySelector('[data-testid="hero__pageTitle"]'),styles:{display:"inline-flex"}}]);

})();